
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Kiva Project &#8212; My Knowledge Hub</title>
    
  <link href="_static/css/theme.css" rel="stylesheet">
  <link href="_static/css/index.ff1ffe594081f20da1ef19478df9384b.css" rel="stylesheet">

    
  <link rel="stylesheet"
    href="_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-book-theme.css?digest=c3fdc42140077d1ad13ad2f1588a4309" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="_static/custom.css" />
    <link rel="stylesheet" type="text/css" href="_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="_static/js/index.be7d3bbb2ef33a8344ce.js">

    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/clipboard.min.js"></script>
    <script src="_static/copybutton.js"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="_static/sphinx-book-theme.d59cb220de22ca1c485ebbdc042f0030.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="_static/sphinx-thebe.js"></script>
    <link rel="shortcut icon" href="_static/favicon.png"/>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Welcome to Data Pipelining!" href="data-pipelining.html" />
    <link rel="prev" title="Welcome to Data Storytelling!" href="data-storytelling.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="index.html">
      
        <!-- `logo` is deprecated in Sphinx 4.0, so remove this when we stop supporting 3 -->
        
      
      
      <img src="_static/logo.png" class="logo" alt="logo">
      
      
      <h1 class="site-logo" id="site-title">My Knowledge Hub</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        <ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="intro.html">
   Hello ðŸ‘‹
  </a>
 </li>
</ul>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="computer-vision.html">
   Welcome to Computer Vision!
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="nlp.html">
   Welcome to Natural Language Processing!
  </a>
 </li>
 <li class="toctree-l1 current active has-children">
  <a class="reference internal" href="data-storytelling.html">
   Welcome to Data Storytelling!
  </a>
  <input checked="" class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul class="current">
   <li class="toctree-l2 current active">
    <a class="current reference internal" href="#">
     Kiva Project
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="data-pipelining.html">
   Welcome to Data Pipelining!
  </a>
 </li>
</ul>

    </div>
</nav> <!-- To handle the deprecated key -->

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="topbar container-xl fixed-top">
    <div class="topbar-contents row">
        <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show"></div>
        <div class="col pl-md-4 topbar-main">
            
            <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
                data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
                aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
                title="Toggle navigation" data-toggle="tooltip" data-placement="left">
                <i class="fas fa-bars"></i>
                <i class="fas fa-arrow-left"></i>
                <i class="fas fa-arrow-up"></i>
            </button>
            
            
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="_sources/kiva.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.ipynb</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
                onclick="printPdf(this)" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

            <!-- Source interaction buttons -->

            <!-- Full screen (wrap in <a> to have style consistency -->

<a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
        data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
        title="Fullscreen mode"><i
            class="fas fa-expand"></i></button></a>

            <!-- Launch buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Launch interactive content"><i class="fas fa-rocket"></i></button>
    <div class="dropdown-buttons">
        
        <a class="binder-button" href="https://mybinder.org/v2/gh/executablebooks/jupyter-book/main?urlpath=tree/book/kiva.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Launch Binder" data-toggle="tooltip"
                data-placement="left"><img class="binder-button-logo"
                    src="_static/images/logo_binder.svg"
                    alt="Interact on binder">Binder</button></a>
        
        
        
        
    </div>
</div>

        </div>

        <!-- Table of contents -->
        <div class="d-none d-md-block col-md-2 bd-toc show noprint">
            
            <div class="tocsection onthispage pt-5 pb-3">
                <i class="fas fa-list"></i> Contents
            </div>
            <nav id="bd-toc-nav" aria-label="Page">
                <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#problem">
   PROBLEM:
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#context">
     Context
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#problem-statement">
     Problem statement
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#personal-disclaimer">
     Personal disclaimer
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#solution">
   SOLUTION:
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#python-packages-functions">
     Python Packages &amp; Functions
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#data">
     Data
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#original-data">
       1. Original Data
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#supplementary-data">
       2. Supplementary Data
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#data-summary">
       Data Summary
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#exploratory-data-analysis">
     Exploratory Data Analysis
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#the-impact-of-kiva-donors">
       The impact of KIVA donors
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
</ul>

            </nav>
        </div>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>Kiva Project</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#problem">
   PROBLEM:
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#context">
     Context
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#problem-statement">
     Problem statement
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#personal-disclaimer">
     Personal disclaimer
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#solution">
   SOLUTION:
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#python-packages-functions">
     Python Packages &amp; Functions
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#data">
     Data
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#original-data">
       1. Original Data
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#supplementary-data">
       2. Supplementary Data
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#data-summary">
       Data Summary
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#exploratory-data-analysis">
     Exploratory Data Analysis
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#the-impact-of-kiva-donors">
       The impact of KIVA donors
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            
              <div>
                
  <div class="tex2jax_ignore mathjax_ignore section" id="kiva-project">
<h1>Kiva Project<a class="headerlink" href="#kiva-project" title="Permalink to this headline">Â¶</a></h1>
<p><strong>(adapted from <a class="reference external" href="https://bit.ly/2J7G9f8">https://bit.ly/2J7G9f8</a>)</strong></p>
<div class="section" id="problem">
<h2>PROBLEM:<a class="headerlink" href="#problem" title="Permalink to this headline">Â¶</a></h2>
<div class="section" id="context">
<h3>Context<a class="headerlink" href="#context" title="Permalink to this headline">Â¶</a></h3>
<p><a class="reference external" href="http://Kiva.org">Kiva.org</a> is an online crowdfunding platform to extend financial services to poor and financially excluded people around the world. Kiva lenders have provided over $1 billion dollars in loans to over 2 million people.</p>
<p>In order to set investment priorities, help inform lenders, and understand their target communities, knowing the level of poverty of each borrower is critical. However, this requires inference based on a limited set of information for each borrower.</p>
<p>Submissions in this challenge will take the form of Python data analysis.</p>
<p>Kiva has provided a dataset of loans issued over the 2014-2018 time period, and participants are invited to use this data as well as source external public datasets to help Kiva build models for assessing borrower welfare levels. With a stronger understanding of their borrowers and their poverty levels, Kiva will be able to better assess and maximize the impact of their work.</p>
</div>
<div class="section" id="problem-statement">
<h3>Problem statement<a class="headerlink" href="#problem-statement" title="Permalink to this headline">Â¶</a></h3>
<p>For the locations in which Kiva has active loans, the objective is to pair Kivaâ€™s data with additional data sources to estimate the welfare level of borrowers in specific regions, based on shared economic and demographic characteristics.</p>
<p>A good solution would connect the features of each loan or product to one of several poverty mapping datasets, which indicate the average level of welfare in a region on as granular a level as possible. Many datasets indicate the poverty rate in a given area, with varying levels of granularity. Kiva would like to be able to disaggregate these regional averages by gender, sector, or borrowing behavior in order to estimate a Kiva borrowerâ€™s level of welfare using all of the relevant information about them. Strong submissions will attempt to map vaguely described locations to more accurate geocodes.</p>
</div>
<div class="section" id="personal-disclaimer">
<h3>Personal disclaimer<a class="headerlink" href="#personal-disclaimer" title="Permalink to this headline">Â¶</a></h3>
<p>From a research perspective, the results obtained are never going to be a full representation of the realities that borrowers experience. It is meant to spark a discussion around how we can identify the welfare level of borrowers and improve them where we can.</p>
</div>
</div>
<div class="section" id="solution">
<h2>SOLUTION:<a class="headerlink" href="#solution" title="Permalink to this headline">Â¶</a></h2>
<div class="section" id="python-packages-functions">
<h3>Python Packages &amp; Functions<a class="headerlink" href="#python-packages-functions" title="Permalink to this headline">Â¶</a></h3>
<p>Here we upload all the Python packages and datasets required for analysis.</p>
<div class="cell tag_hide-input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Packages</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">matplotlib.dates</span> <span class="k">as</span> <span class="nn">mdates</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">KeyboardInterrupt</span><span class="g g-Whitespace">                         </span>Traceback (most recent call last)
<span class="o">~</span>\<span class="n">AppData</span>\<span class="n">Local</span>\<span class="n">Temp</span>\<span class="n">ipykernel_18220</span>\<span class="mf">261066939.</span><span class="n">py</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
<span class="g g-Whitespace">      </span><span class="mi">3</span> <span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="g g-Whitespace">      </span><span class="mi">4</span> 
<span class="ne">----&gt; </span><span class="mi">5</span> <span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="g g-Whitespace">      </span><span class="mi">6</span> <span class="kn">import</span> <span class="nn">matplotlib.dates</span> <span class="k">as</span> <span class="nn">mdates</span>

<span class="ne">c</span>:\users\ct\documents\github\knowledge-hub\venv\lib\site-packages\matplotlib\pyplot.py in &lt;module&gt;
<span class="g g-Whitespace">     </span><span class="mi">50</span> <span class="kn">import</span> <span class="nn">matplotlib.image</span>
<span class="g g-Whitespace">     </span><span class="mi">51</span> <span class="kn">from</span> <span class="nn">matplotlib</span> <span class="kn">import</span> <span class="n">_api</span>
<span class="ne">---&gt; </span><span class="mi">52</span> <span class="kn">from</span> <span class="nn">matplotlib</span> <span class="kn">import</span> <span class="n">rcsetup</span><span class="p">,</span> <span class="n">style</span>
<span class="g g-Whitespace">     </span><span class="mi">53</span> <span class="kn">from</span> <span class="nn">matplotlib</span> <span class="kn">import</span> <span class="n">_pylab_helpers</span><span class="p">,</span> <span class="n">interactive</span>
<span class="g g-Whitespace">     </span><span class="mi">54</span> <span class="kn">from</span> <span class="nn">matplotlib</span> <span class="kn">import</span> <span class="n">cbook</span>

<span class="ne">c</span>:\users\ct\documents\github\knowledge-hub\venv\lib\site-packages\matplotlib\style\__init__.py in &lt;module&gt;
<span class="ne">----&gt; </span><span class="mi">1</span> <span class="kn">from</span> <span class="nn">.core</span> <span class="kn">import</span> <span class="n">use</span><span class="p">,</span> <span class="n">context</span><span class="p">,</span> <span class="n">available</span><span class="p">,</span> <span class="n">library</span><span class="p">,</span> <span class="n">reload_library</span>

<span class="ne">c</span>:\users\ct\documents\github\knowledge-hub\venv\lib\site-packages\matplotlib\style\core.py in &lt;module&gt;
<span class="g g-Whitespace">    </span><span class="mi">219</span> <span class="c1"># Load style library</span>
<span class="g g-Whitespace">    </span><span class="mi">220</span> <span class="c1"># ==================</span>
<span class="ne">--&gt; </span><span class="mi">221</span> <span class="n">_base_library</span> <span class="o">=</span> <span class="n">read_style_directory</span><span class="p">(</span><span class="n">BASE_LIBRARY_PATH</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">222</span> <span class="n">library</span> <span class="o">=</span> <span class="kc">None</span>
<span class="g g-Whitespace">    </span><span class="mi">223</span> <span class="n">available</span> <span class="o">=</span> <span class="p">[]</span>

<span class="nn">c:\users\ct\documents\github\knowledge-hub\venv\lib\site-packages\matplotlib\style\core.py</span> in <span class="ni">read_style_directory</span><span class="nt">(style_dir)</span>
<span class="g g-Whitespace">    </span><span class="mi">197</span>         <span class="k">with</span> <span class="n">warnings</span><span class="o">.</span><span class="n">catch_warnings</span><span class="p">(</span><span class="n">record</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> <span class="k">as</span> <span class="n">warns</span><span class="p">:</span>
<span class="g g-Whitespace">    </span><span class="mi">198</span>             <span class="n">styles</span><span class="p">[</span><span class="n">path</span><span class="o">.</span><span class="n">stem</span><span class="p">]</span> <span class="o">=</span> <span class="n">rc_params_from_file</span><span class="p">(</span>
<span class="ne">--&gt; </span><span class="mi">199</span>                 <span class="n">path</span><span class="p">,</span> <span class="n">use_default_template</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">200</span>         <span class="k">for</span> <span class="n">w</span> <span class="ow">in</span> <span class="n">warns</span><span class="p">:</span>
<span class="g g-Whitespace">    </span><span class="mi">201</span>             <span class="n">_log</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s1">&#39;In </span><span class="si">%s</span><span class="s1">: </span><span class="si">%s</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">w</span><span class="o">.</span><span class="n">message</span><span class="p">)</span>

<span class="nn">c:\users\ct\documents\github\knowledge-hub\venv\lib\site-packages\matplotlib\__init__.py</span> in <span class="ni">rc_params_from_file</span><span class="nt">(fname, fail_on_error, use_default_template)</span>
<span class="nn">    850         parameters specified</span> in <span class="ni">the file. </span><span class="nt">(Useful for updating dicts.)</span>
<span class="g g-Whitespace">    </span><span class="mi">851</span>     <span class="sd">&quot;&quot;&quot;</span>
<span class="ne">--&gt; </span><span class="mi">852</span><span class="sd">     config_from_file = _rc_params_in_file(fname, fail_on_error=fail_on_error)</span>
<span class="g g-Whitespace">    </span><span class="mi">853</span><span class="sd"> </span>
<span class="g g-Whitespace">    </span><span class="mi">854</span><span class="sd">     if not use_default_template:</span>

<span class="nn">c:\users\ct\documents\github\knowledge-hub\venv\lib\site-packages\matplotlib\__init__.py</span> in <span class="ni">_rc_params_in_file</span><span class="nt">(fname, transform, fail_on_error)</span>
<span class="g g-Whitespace">    </span><span class="mi">776</span><span class="sd">     import matplotlib as mpl</span>
<span class="g g-Whitespace">    </span><span class="mi">777</span><span class="sd">     rc_temp = {}</span>
<span class="ne">--&gt; </span><span class="mi">778</span><span class="sd">     with _open_file_or_url(fname) as fd:</span>
<span class="g g-Whitespace">    </span><span class="mi">779</span><span class="sd">         try:</span>
<span class="g g-Whitespace">    </span><span class="mi">780</span><span class="sd">             for line_no, line in enumerate(fd, 1):</span>

<span class="nn">~\AppData\Local\Programs\Python\Python37\lib\contextlib.py</span> in <span class="ni">__enter__</span><span class="nt">(self)</span>
<span class="g g-Whitespace">    </span><span class="mi">110</span><span class="sd">         del self.args, self.kwds, self.func</span>
<span class="g g-Whitespace">    </span><span class="mi">111</span><span class="sd">         try:</span>
<span class="ne">--&gt; </span><span class="mi">112</span><span class="sd">             return next(self.gen)</span>
<span class="g g-Whitespace">    </span><span class="mi">113</span><span class="sd">         except StopIteration:</span>
<span class="g g-Whitespace">    </span><span class="mi">114</span><span class="sd">             raise RuntimeError(&quot;generator didn&#39;t yield&quot;) from None</span>

<span class="nn">c:\users\ct\documents\github\knowledge-hub\venv\lib\site-packages\matplotlib\__init__.py</span> in <span class="ni">_open_file_or_url</span><span class="nt">(fname)</span>
<span class="g g-Whitespace">    </span><span class="mi">753</span><span class="sd">         if encoding is None:</span>
<span class="g g-Whitespace">    </span><span class="mi">754</span><span class="sd">             encoding = &quot;utf-8&quot;</span>
<span class="ne">--&gt; </span><span class="mi">755</span><span class="sd">         with open(fname, encoding=encoding) as f:</span>
<span class="g g-Whitespace">    </span><span class="mi">756</span><span class="sd">             yield f</span>
<span class="g g-Whitespace">    </span><span class="mi">757</span><span class="sd"> </span>

<span class="nn">~\AppData\Local\Programs\Python\Python37\lib\codecs.py</span> in <span class="ni">__init__</span><span class="nt">(self, errors)</span>
<span class="g g-Whitespace">    </span><span class="mi">258</span><span class="sd">     remembers the state of the decoding process between calls to decode().</span>
<span class="g g-Whitespace">    </span><span class="mi">259</span><span class="sd">     &quot;&quot;&quot;</span>
<span class="ne">--&gt; </span><span class="mi">260</span>     <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">errors</span><span class="o">=</span><span class="s1">&#39;strict&#39;</span><span class="p">):</span>
<span class="g g-Whitespace">    </span><span class="mi">261</span>         <span class="s2">&quot;&quot;&quot;</span>
<span class="g g-Whitespace">    </span><span class="mi">262</span><span class="s2">         Create an IncrementalDecoder instance.</span>

<span class="ne">KeyboardInterrupt</span>: 
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="data">
<h3>Data<a class="headerlink" href="#data" title="Permalink to this headline">Â¶</a></h3>
<div class="section" id="original-data">
<h4>1. Original Data<a class="headerlink" href="#original-data" title="Permalink to this headline">Â¶</a></h4>
<div class="cell tag_hide-input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">loan_data</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;C://Users//CT//Documents//GitHub//knowledge-hub//book//csvs//kiva-project//kiva_loans.csv&#39;</span><span class="p">)</span>
<span class="n">location_data</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;C://Users//CT//Documents//GitHub//knowledge-hub//book//csvs//kiva-project//kiva_mpi_region_locations.csv&#39;</span><span class="p">)</span>
<span class="n">loan_themes</span>  <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;C://Users//CT//Documents//GitHub//knowledge-hub//book//csvs//kiva-project//loan_theme_ids.csv&#39;</span><span class="p">)</span>
<span class="n">regional_lts</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;C://Users//CT//Documents//GitHub//knowledge-hub//book//csvs//kiva-project//loan_themes_by_region.csv&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell tag_hide-input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">dfs</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;loan_data&#39;</span><span class="p">:</span><span class="n">loan_data</span><span class="p">,</span> <span class="s1">&#39;location_data&#39;</span><span class="p">:</span><span class="n">location_data</span><span class="p">,</span>
       <span class="s1">&#39;loan_themes&#39;</span><span class="p">:</span><span class="n">loan_themes</span><span class="p">,</span> <span class="s1">&#39;regional_lts&#39;</span><span class="p">:</span><span class="n">regional_lts</span><span class="p">}</span>

<span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">dfs</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">key</span><span class="o">+</span><span class="s1">&#39; shape:&#39;</span><span class="p">),</span> <span class="n">val</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>loan_data shape: (671205, 20)
location_data shape: (2772, 9)
loan_themes shape: (779092, 4)
regional_lts shape: (15736, 21)
</pre></div>
</div>
</div>
</div>
<br>
<p><u><strong>Descriptions of the original datasets</strong></u></p>
<p>There are four data sources provided by Kiva:</p>
<ul class="simple">
<li><p><em><strong>loan_data</strong></em></p>
<ol class="simple">
<li><p><strong>id</strong> - Unique ID for loan</p></li>
<li><p><strong>funded_amount</strong> - The amount disbursed by Kiva to the field agent (USD)</p></li>
<li><p><strong>loan_amount</strong> - The amount disbursed by the field agent to the borrower (USD)</p></li>
<li><p><strong>activity</strong> - More granular category</p></li>
<li><p><strong>sector</strong> - High level category</p></li>
<li><p><strong>use</strong> - Exact usage of loan amount</p></li>
<li><p><strong>country_code</strong> - ISO country code of country in which loan was disbursed</p></li>
<li><p><strong>country</strong> - Full country name of country in which loan was disbursed</p></li>
<li><p><strong>region</strong> - Full region name within the country</p></li>
<li><p><strong>currency</strong> - The currency in which the loan was disbursed</p></li>
<li><p><strong>partner_id</strong> - ID of partner organization</p></li>
<li><p><strong>posted_time</strong> - The time at which the loan is posted on Kiva by the field agent</p></li>
<li><p><strong>disbursed_time</strong> - The time at which the loan is disbursed by the field agent to the borrower</p></li>
<li><p><strong>funded_time</strong> - The time at which the loan posted to Kiva gets funded by lenders completely</p></li>
<li><p><strong>term_in_months</strong> - The duration for which the loan was disbursed in months</p></li>
<li><p><strong>lender_count</strong> - The total number of lenders that contributed to this loan</p></li>
<li><p><strong>tags</strong></p></li>
<li><p><strong>borrower_genders</strong> - Comma separated M,F letters, where each instance represents a single male/female in the group</p></li>
<li><p><strong>repayment_interval</strong></p></li>
<li><p><strong>date</strong></p></li>
</ol>
</li>
</ul>
<ul class="simple">
<li><p><em><strong>location_data</strong></em></p>
<ol class="simple">
<li><p><strong>LocationName</strong> - region, country</p></li>
<li><p><strong>ISO</strong> - some sort of unique abbreviation for country</p></li>
<li><p><strong>country</strong> - country</p></li>
<li><p><strong>region</strong> - region within country</p></li>
<li><p><strong>world_region</strong> - parts of the world</p></li>
<li><p><strong>MPI</strong> - multidimensional poverty index</p></li>
<li><p><strong>geo</strong> - (latitude, longitude)</p></li>
<li><p><strong>lat</strong> - latitude</p></li>
<li><p><strong>lon</strong> - longitude</p></li>
</ol>
</li>
</ul>
<ul class="simple">
<li><p><em><strong>loan_themes</strong></em></p>
<ol class="simple">
<li><p><strong>id</strong> - Unique ID for loan (Loan ID)</p></li>
<li><p><strong>Loan Theme ID</strong> - ID for Loan Theme</p></li>
<li><p><strong>Loan Theme Type</strong> - Category name of type of loan</p></li>
<li><p><strong>Partner ID</strong></p></li>
</ol>
</li>
</ul>
<ul class="simple">
<li><p><em><strong>regional_lts</strong></em></p>
<ol class="simple">
<li><p><strong>Partner ID</strong></p></li>
<li><p><strong>Field Partner Name</strong></p></li>
<li><p><strong>sector</strong></p></li>
<li><p><strong>Loan Theme ID</strong></p></li>
<li><p><strong>Loan Theme Type</strong></p></li>
<li><p><strong>country</strong></p></li>
<li><p><strong>forkiva</strong></p></li>
<li><p><strong>region</strong></p></li>
<li><p><strong>geocode_old</strong></p></li>
<li><p><strong>ISO</strong></p></li>
<li><p><strong>number</strong></p></li>
<li><p><strong>amount</strong></p></li>
<li><p><strong>LocationName</strong></p></li>
<li><p><strong>geocode</strong></p></li>
<li><p><strong>names</strong></p></li>
<li><p><strong>geo</strong></p></li>
<li><p><strong>lat</strong></p></li>
<li><p><strong>lon</strong></p></li>
<li><p><strong>mpi_region</strong></p></li>
<li><p><strong>mpi_geo</strong></p></li>
<li><p><strong>rural_pct</strong></p></li>
</ol>
</li>
</ul>
<br>
</div>
<div class="section" id="supplementary-data">
<h4>2. Supplementary Data<a class="headerlink" href="#supplementary-data" title="Permalink to this headline">Â¶</a></h4>
<p>In this section, we aim to gather the following data from the World Bank:</p>
<p><a class="reference external" href="https://www.quora.com/What-does-per-capita-expenditure-mean?share=1">Per Capita Expenditure (PCE)</a> for each country - this is the total market value of all purchases in a country divided by that countryâ€™s total population (data: <a class="reference external" href="https://bit.ly/3blw0be">https://bit.ly/3blw0be</a>)</p>
<div class="cell tag_hide-input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">PCE_data</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;C://Users//CT//Documents//GitHub//knowledge-hub//book//csvs//kiva-project//PCE data.csv&#39;</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;PCE data shape:&#39;</span><span class="p">,</span><span class="n">PCE_data</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>PCE data shape: (178, 62)
</pre></div>
</div>
</div>
</div>
<div class="cell tag_hide-input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># add this dataset to the dictionary</span>
<span class="n">dfs</span><span class="p">[</span><span class="s1">&#39;PCE_data&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">PCE_data</span>
<span class="n">dfs</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>dict_keys([&#39;loan_data&#39;, &#39;location_data&#39;, &#39;loan_themes&#39;, &#39;regional_lts&#39;, &#39;PCE_data&#39;])
</pre></div>
</div>
</div>
</div>
<br>
</div>
<div class="section" id="data-summary">
<h4>Data Summary<a class="headerlink" href="#data-summary" title="Permalink to this headline">Â¶</a></h4>
<div class="cell tag_hide-input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">dfs</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
    <span class="c1"># 1. Get the summary table</span>
    <span class="n">num_summary</span> <span class="o">=</span> <span class="n">val</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span>
    <span class="n">cat_summary</span> <span class="o">=</span> <span class="n">val</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span><span class="n">val</span><span class="o">.</span><span class="n">dtypes</span><span class="o">==</span><span class="n">np</span><span class="o">.</span><span class="n">object</span><span class="p">]</span><span class="o">.</span><span class="n">describe</span><span class="p">(</span><span class="n">include</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;O&#39;</span><span class="p">])</span>
    <span class="c1"># 2. Display it</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">SUMMARY STATISTICS WITHOUT AGGREGATION: </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">key</span><span class="p">),</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
    <span class="n">display</span><span class="p">(</span><span class="n">num_summary</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
    <span class="n">display</span><span class="p">(</span><span class="n">cat_summary</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>SUMMARY STATISTICS WITHOUT AGGREGATION: loan_data 
</pre></div>
</div>
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>id</th>
      <th>funded_amount</th>
      <th>loan_amount</th>
      <th>partner_id</th>
      <th>term_in_months</th>
      <th>lender_count</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>count</th>
      <td>6.712050e+05</td>
      <td>671205.000000</td>
      <td>671205.000000</td>
      <td>657698.000000</td>
      <td>671205.000000</td>
      <td>671205.000000</td>
    </tr>
    <tr>
      <th>mean</th>
      <td>9.932486e+05</td>
      <td>785.995061</td>
      <td>842.397107</td>
      <td>178.199616</td>
      <td>13.739022</td>
      <td>20.590922</td>
    </tr>
    <tr>
      <th>std</th>
      <td>1.966113e+05</td>
      <td>1130.398941</td>
      <td>1198.660073</td>
      <td>94.247581</td>
      <td>8.598919</td>
      <td>28.459551</td>
    </tr>
    <tr>
      <th>min</th>
      <td>6.530470e+05</td>
      <td>0.000000</td>
      <td>25.000000</td>
      <td>9.000000</td>
      <td>1.000000</td>
      <td>0.000000</td>
    </tr>
    <tr>
      <th>25%</th>
      <td>8.230720e+05</td>
      <td>250.000000</td>
      <td>275.000000</td>
      <td>126.000000</td>
      <td>8.000000</td>
      <td>7.000000</td>
    </tr>
    <tr>
      <th>50%</th>
      <td>9.927800e+05</td>
      <td>450.000000</td>
      <td>500.000000</td>
      <td>145.000000</td>
      <td>13.000000</td>
      <td>13.000000</td>
    </tr>
    <tr>
      <th>75%</th>
      <td>1.163653e+06</td>
      <td>900.000000</td>
      <td>1000.000000</td>
      <td>204.000000</td>
      <td>14.000000</td>
      <td>24.000000</td>
    </tr>
    <tr>
      <th>max</th>
      <td>1.340339e+06</td>
      <td>100000.000000</td>
      <td>100000.000000</td>
      <td>536.000000</td>
      <td>158.000000</td>
      <td>2986.000000</td>
    </tr>
  </tbody>
</table>
</div></div><div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>activity</th>
      <th>sector</th>
      <th>use</th>
      <th>country_code</th>
      <th>country</th>
      <th>region</th>
      <th>currency</th>
      <th>posted_time</th>
      <th>disbursed_time</th>
      <th>funded_time</th>
      <th>tags</th>
      <th>borrower_genders</th>
      <th>repayment_interval</th>
      <th>date</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>count</th>
      <td>671205</td>
      <td>671205</td>
      <td>666973</td>
      <td>671197</td>
      <td>671205</td>
      <td>614405</td>
      <td>671205</td>
      <td>671205</td>
      <td>668809</td>
      <td>622874</td>
      <td>499789</td>
      <td>666984</td>
      <td>671205</td>
      <td>671205</td>
    </tr>
    <tr>
      <th>unique</th>
      <td>163</td>
      <td>15</td>
      <td>424912</td>
      <td>86</td>
      <td>87</td>
      <td>12695</td>
      <td>67</td>
      <td>667399</td>
      <td>5719</td>
      <td>498007</td>
      <td>86719</td>
      <td>11298</td>
      <td>4</td>
      <td>1298</td>
    </tr>
    <tr>
      <th>top</th>
      <td>Farming</td>
      <td>Agriculture</td>
      <td>to buy a water filter to provide safe drinking...</td>
      <td>PH</td>
      <td>Philippines</td>
      <td>Kaduna</td>
      <td>PHP</td>
      <td>2017-05-15 00:00:00+00:00</td>
      <td>2017-02-01 08:00:00+00:00</td>
      <td>2016-09-21 13:03:24+00:00</td>
      <td>user_favorite</td>
      <td>female</td>
      <td>monthly</td>
      <td>2017-03-20</td>
    </tr>
    <tr>
      <th>freq</th>
      <td>72955</td>
      <td>180302</td>
      <td>5217</td>
      <td>160441</td>
      <td>160441</td>
      <td>10000</td>
      <td>160440</td>
      <td>25</td>
      <td>2800</td>
      <td>33</td>
      <td>27088</td>
      <td>426502</td>
      <td>342717</td>
      <td>1308</td>
    </tr>
  </tbody>
</table>
</div></div><div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>SUMMARY STATISTICS WITHOUT AGGREGATION: location_data 
</pre></div>
</div>
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>MPI</th>
      <th>lat</th>
      <th>lon</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>count</th>
      <td>984.000000</td>
      <td>892.000000</td>
      <td>892.000000</td>
    </tr>
    <tr>
      <th>mean</th>
      <td>0.211330</td>
      <td>9.169710</td>
      <td>16.635888</td>
    </tr>
    <tr>
      <th>std</th>
      <td>0.183621</td>
      <td>16.484531</td>
      <td>61.234566</td>
    </tr>
    <tr>
      <th>min</th>
      <td>0.000000</td>
      <td>-34.947896</td>
      <td>-122.747131</td>
    </tr>
    <tr>
      <th>25%</th>
      <td>0.053000</td>
      <td>-1.027901</td>
      <td>-12.819854</td>
    </tr>
    <tr>
      <th>50%</th>
      <td>0.155000</td>
      <td>11.211379</td>
      <td>26.419389</td>
    </tr>
    <tr>
      <th>75%</th>
      <td>0.341500</td>
      <td>18.084292</td>
      <td>47.019436</td>
    </tr>
    <tr>
      <th>max</th>
      <td>0.744000</td>
      <td>49.264748</td>
      <td>138.581284</td>
    </tr>
  </tbody>
</table>
</div></div><div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>LocationName</th>
      <th>ISO</th>
      <th>country</th>
      <th>region</th>
      <th>world_region</th>
      <th>geo</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>count</th>
      <td>984</td>
      <td>1008</td>
      <td>1008</td>
      <td>984</td>
      <td>1008</td>
      <td>2772</td>
    </tr>
    <tr>
      <th>unique</th>
      <td>984</td>
      <td>102</td>
      <td>102</td>
      <td>928</td>
      <td>6</td>
      <td>881</td>
    </tr>
    <tr>
      <th>top</th>
      <td>Al-Anbar, Iraq</td>
      <td>NGA</td>
      <td>Nigeria</td>
      <td>Eastern</td>
      <td>Sub-Saharan Africa</td>
      <td>(1000.0, 1000.0)</td>
    </tr>
    <tr>
      <th>freq</th>
      <td>1</td>
      <td>37</td>
      <td>37</td>
      <td>8</td>
      <td>432</td>
      <td>1880</td>
    </tr>
  </tbody>
</table>
</div></div><div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>SUMMARY STATISTICS WITHOUT AGGREGATION: loan_themes 
</pre></div>
</div>
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>id</th>
      <th>Partner ID</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>count</th>
      <td>7.790920e+05</td>
      <td>764279.000000</td>
    </tr>
    <tr>
      <th>mean</th>
      <td>1.047475e+06</td>
      <td>180.825840</td>
    </tr>
    <tr>
      <th>std</th>
      <td>2.282538e+05</td>
      <td>97.914029</td>
    </tr>
    <tr>
      <th>min</th>
      <td>6.386310e+05</td>
      <td>9.000000</td>
    </tr>
    <tr>
      <th>25%</th>
      <td>8.499768e+05</td>
      <td>126.000000</td>
    </tr>
    <tr>
      <th>50%</th>
      <td>1.046528e+06</td>
      <td>145.000000</td>
    </tr>
    <tr>
      <th>75%</th>
      <td>1.244768e+06</td>
      <td>204.000000</td>
    </tr>
    <tr>
      <th>max</th>
      <td>1.444243e+06</td>
      <td>557.000000</td>
    </tr>
  </tbody>
</table>
</div></div><div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Loan Theme ID</th>
      <th>Loan Theme Type</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>count</th>
      <td>764279</td>
      <td>764279</td>
    </tr>
    <tr>
      <th>unique</th>
      <td>956</td>
      <td>203</td>
    </tr>
    <tr>
      <th>top</th>
      <td>a1050000000wf0q</td>
      <td>General</td>
    </tr>
    <tr>
      <th>freq</th>
      <td>110264</td>
      <td>380693</td>
    </tr>
  </tbody>
</table>
</div></div><div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>SUMMARY STATISTICS WITHOUT AGGREGATION: regional_lts 
</pre></div>
</div>
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Partner ID</th>
      <th>number</th>
      <th>amount</th>
      <th>lat</th>
      <th>lon</th>
      <th>rural_pct</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>count</th>
      <td>15736.000000</td>
      <td>15736.000000</td>
      <td>1.573600e+04</td>
      <td>13662.000000</td>
      <td>13662.000000</td>
      <td>14344.000000</td>
    </tr>
    <tr>
      <th>mean</th>
      <td>191.376144</td>
      <td>53.628432</td>
      <td>2.003991e+04</td>
      <td>14.328878</td>
      <td>29.433569</td>
      <td>68.084635</td>
    </tr>
    <tr>
      <th>std</th>
      <td>118.705003</td>
      <td>403.079799</td>
      <td>9.636941e+04</td>
      <td>16.757689</td>
      <td>83.255739</td>
      <td>26.550064</td>
    </tr>
    <tr>
      <th>min</th>
      <td>9.000000</td>
      <td>1.000000</td>
      <td>2.500000e+01</td>
      <td>-34.610548</td>
      <td>-172.790661</td>
      <td>0.000000</td>
    </tr>
    <tr>
      <th>25%</th>
      <td>123.000000</td>
      <td>1.000000</td>
      <td>9.500000e+02</td>
      <td>6.266728</td>
      <td>-71.967463</td>
      <td>60.000000</td>
    </tr>
    <tr>
      <th>50%</th>
      <td>154.000000</td>
      <td>4.000000</td>
      <td>2.600000e+03</td>
      <td>13.484101</td>
      <td>41.899993</td>
      <td>73.000000</td>
    </tr>
    <tr>
      <th>75%</th>
      <td>217.000000</td>
      <td>15.000000</td>
      <td>8.750000e+03</td>
      <td>22.189940</td>
      <td>106.677321</td>
      <td>85.000000</td>
    </tr>
    <tr>
      <th>max</th>
      <td>545.000000</td>
      <td>22538.000000</td>
      <td>4.929900e+06</td>
      <td>51.314017</td>
      <td>159.972900</td>
      <td>100.000000</td>
    </tr>
  </tbody>
</table>
</div></div><div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Field Partner Name</th>
      <th>sector</th>
      <th>Loan Theme ID</th>
      <th>Loan Theme Type</th>
      <th>country</th>
      <th>forkiva</th>
      <th>region</th>
      <th>geocode_old</th>
      <th>ISO</th>
      <th>LocationName</th>
      <th>geocode</th>
      <th>names</th>
      <th>geo</th>
      <th>mpi_region</th>
      <th>mpi_geo</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>count</th>
      <td>15736</td>
      <td>15736</td>
      <td>15736</td>
      <td>15736</td>
      <td>15736</td>
      <td>15736</td>
      <td>15736</td>
      <td>1200</td>
      <td>15722</td>
      <td>15736</td>
      <td>13662</td>
      <td>13661</td>
      <td>15736</td>
      <td>15722</td>
      <td>9671</td>
    </tr>
    <tr>
      <th>unique</th>
      <td>302</td>
      <td>11</td>
      <td>718</td>
      <td>170</td>
      <td>79</td>
      <td>2</td>
      <td>9526</td>
      <td>340</td>
      <td>77</td>
      <td>9561</td>
      <td>6557</td>
      <td>6275</td>
      <td>6558</td>
      <td>392</td>
      <td>335</td>
    </tr>
    <tr>
      <th>top</th>
      <td>Alalay sa Kaunlaran (ASKI)</td>
      <td>General Financial Inclusion</td>
      <td>a1050000000wf0V</td>
      <td>General</td>
      <td>Philippines</td>
      <td>No</td>
      <td>Chouf</td>
      <td>(-1.2833333, 36.8166667)</td>
      <td>PHL</td>
      <td>Chouf, Lebanon</td>
      <td>[(19.7126764, 105.8393447)]</td>
      <td>Philippines</td>
      <td>(1000.0, 1000.0)</td>
      <td>Northern Mindanao, Philippines</td>
      <td>(8.020163499999999, 124.6856509)</td>
    </tr>
    <tr>
      <th>freq</th>
      <td>1207</td>
      <td>13679</td>
      <td>1152</td>
      <td>5661</td>
      <td>3467</td>
      <td>13211</td>
      <td>25</td>
      <td>20</td>
      <td>3467</td>
      <td>25</td>
      <td>43</td>
      <td>137</td>
      <td>2074</td>
      <td>1174</td>
      <td>1174</td>
    </tr>
  </tbody>
</table>
</div></div><div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>SUMMARY STATISTICS WITHOUT AGGREGATION: PCE_data 
</pre></div>
</div>
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>1960</th>
      <th>1961</th>
      <th>1962</th>
      <th>1963</th>
      <th>1964</th>
      <th>1965</th>
      <th>1966</th>
      <th>1967</th>
      <th>1968</th>
      <th>1969</th>
      <th>...</th>
      <th>2010</th>
      <th>2011</th>
      <th>2012</th>
      <th>2013</th>
      <th>2014</th>
      <th>2015</th>
      <th>2016</th>
      <th>2017</th>
      <th>2018</th>
      <th>Unnamed: 60</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>count</th>
      <td>42.000000</td>
      <td>43.000000</td>
      <td>44.000000</td>
      <td>44.000000</td>
      <td>46.000000</td>
      <td>49.000000</td>
      <td>50.000000</td>
      <td>51.000000</td>
      <td>51.000000</td>
      <td>52.000000</td>
      <td>...</td>
      <td>178.000000</td>
      <td>165.000000</td>
      <td>164.000000</td>
      <td>163.000000</td>
      <td>161.000000</td>
      <td>159.000000</td>
      <td>158.000000</td>
      <td>156.000000</td>
      <td>147.000000</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>mean</th>
      <td>1809.494762</td>
      <td>1847.716977</td>
      <td>1877.875227</td>
      <td>1940.011136</td>
      <td>2015.650652</td>
      <td>2010.033673</td>
      <td>2288.681000</td>
      <td>2320.084902</td>
      <td>2392.880000</td>
      <td>2671.819423</td>
      <td>...</td>
      <td>7432.308315</td>
      <td>7394.381152</td>
      <td>7501.210305</td>
      <td>7620.346564</td>
      <td>7789.201615</td>
      <td>7952.960314</td>
      <td>8114.411582</td>
      <td>8357.417692</td>
      <td>8682.582653</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>std</th>
      <td>2328.596444</td>
      <td>2368.869204</td>
      <td>2396.605752</td>
      <td>2484.395372</td>
      <td>2564.813108</td>
      <td>2590.874723</td>
      <td>3100.951093</td>
      <td>3202.102899</td>
      <td>3313.045327</td>
      <td>3692.897134</td>
      <td>...</td>
      <td>9241.753759</td>
      <td>8860.780457</td>
      <td>8887.466955</td>
      <td>8930.195998</td>
      <td>9055.941821</td>
      <td>9209.450015</td>
      <td>9352.514087</td>
      <td>9508.928613</td>
      <td>9765.671221</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>min</th>
      <td>5.400000</td>
      <td>5.460000</td>
      <td>6.260000</td>
      <td>7.100000</td>
      <td>7.600000</td>
      <td>7.830000</td>
      <td>8.960000</td>
      <td>8.720000</td>
      <td>8.820000</td>
      <td>9.000000</td>
      <td>...</td>
      <td>189.820000</td>
      <td>198.280000</td>
      <td>199.700000</td>
      <td>213.930000</td>
      <td>215.140000</td>
      <td>204.180000</td>
      <td>194.430000</td>
      <td>188.640000</td>
      <td>189.160000</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>25%</th>
      <td>638.492500</td>
      <td>615.280000</td>
      <td>586.805000</td>
      <td>615.527500</td>
      <td>574.932500</td>
      <td>524.920000</td>
      <td>570.900000</td>
      <td>577.155000</td>
      <td>583.605000</td>
      <td>581.315000</td>
      <td>...</td>
      <td>1038.437500</td>
      <td>1071.930000</td>
      <td>1175.210000</td>
      <td>1257.215000</td>
      <td>1326.620000</td>
      <td>1312.475000</td>
      <td>1439.117500</td>
      <td>1523.852500</td>
      <td>1552.660000</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>50%</th>
      <td>947.700000</td>
      <td>958.810000</td>
      <td>1090.455000</td>
      <td>1131.675000</td>
      <td>1166.285000</td>
      <td>1056.250000</td>
      <td>1181.270000</td>
      <td>1233.510000</td>
      <td>1212.540000</td>
      <td>1266.920000</td>
      <td>...</td>
      <td>3180.270000</td>
      <td>3264.480000</td>
      <td>3280.025000</td>
      <td>3569.600000</td>
      <td>3813.130000</td>
      <td>3945.950000</td>
      <td>4085.135000</td>
      <td>4403.790000</td>
      <td>4579.960000</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>75%</th>
      <td>2022.472500</td>
      <td>2058.570000</td>
      <td>2096.865000</td>
      <td>2161.477500</td>
      <td>2315.760000</td>
      <td>2330.140000</td>
      <td>2511.492500</td>
      <td>2537.875000</td>
      <td>2602.420000</td>
      <td>2824.700000</td>
      <td>...</td>
      <td>9308.487500</td>
      <td>8833.490000</td>
      <td>9080.125000</td>
      <td>9492.310000</td>
      <td>9691.510000</td>
      <td>10008.145000</td>
      <td>10458.250000</td>
      <td>10925.800000</td>
      <td>11395.550000</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>max</th>
      <td>10350.000000</td>
      <td>10847.400000</td>
      <td>11143.700000</td>
      <td>11568.600000</td>
      <td>11941.800000</td>
      <td>12326.700000</td>
      <td>13818.600000</td>
      <td>14632.700000</td>
      <td>15066.200000</td>
      <td>15839.300000</td>
      <td>...</td>
      <td>48546.600000</td>
      <td>40030.900000</td>
      <td>40534.200000</td>
      <td>41121.300000</td>
      <td>41139.500000</td>
      <td>41384.100000</td>
      <td>41516.800000</td>
      <td>41636.300000</td>
      <td>41717.200000</td>
      <td>NaN</td>
    </tr>
  </tbody>
</table>
<p>8 rows Ã— 60 columns</p>
</div></div><div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Unnamed: 0</th>
      <th>region</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>count</th>
      <td>178</td>
      <td>178</td>
    </tr>
    <tr>
      <th>unique</th>
      <td>178</td>
      <td>7</td>
    </tr>
    <tr>
      <th>top</th>
      <td>Burundi</td>
      <td>Sub-Saharan Africa</td>
    </tr>
    <tr>
      <th>freq</th>
      <td>1</td>
      <td>44</td>
    </tr>
  </tbody>
</table>
</div></div><div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="section" id="exploratory-data-analysis">
<h3>Exploratory Data Analysis<a class="headerlink" href="#exploratory-data-analysis" title="Permalink to this headline">Â¶</a></h3>
<div class="section" id="the-impact-of-kiva-donors">
<h4>The impact of KIVA donors<a class="headerlink" href="#the-impact-of-kiva-donors" title="Permalink to this headline">Â¶</a></h4>
<p>In this section, we seek to explore the data to answer certain questions around KIVA donor contributions</p>
<div class="cell tag_hide-input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">1. How much of the total loan amount has Kiva financed?</span><span class="se">\n\n</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># 1. Calculate the percentage of loan requests that have been funded</span>
<span class="n">percentage1</span> <span class="o">=</span> <span class="p">(</span><span class="n">loan_data</span><span class="o">.</span><span class="n">funded_amount</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span><span class="o">/</span><span class="n">loan_data</span><span class="o">.</span><span class="n">loan_amount</span><span class="o">.</span><span class="n">sum</span><span class="p">())</span><span class="o">*</span><span class="mi">100</span>
<span class="n">percentage1</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="n">percentage1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>

<span class="c1"># 2. Display the result</span>
<span class="n">status</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Financed by KIVA&#39;</span><span class="p">,</span><span class="s1">&#39;Not financed by KIVA&#39;</span><span class="p">]</span>
<span class="n">values</span> <span class="o">=</span> <span class="p">[</span><span class="n">percentage1</span><span class="p">,</span> <span class="p">(</span><span class="mi">100</span><span class="o">-</span><span class="n">percentage1</span><span class="p">)]</span>

<span class="n">fig1</span><span class="p">,</span> <span class="n">ax1</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">pie</span><span class="p">(</span><span class="n">values</span><span class="p">,</span> <span class="n">labels</span><span class="o">=</span><span class="n">status</span><span class="p">,</span>
        <span class="n">autopct</span><span class="o">=</span><span class="s1">&#39;</span><span class="si">%1.2f%%</span><span class="s1">&#39;</span><span class="p">,</span>
        <span class="n">startangle</span><span class="o">=</span><span class="mi">90</span><span class="p">)</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">axis</span><span class="p">(</span><span class="s1">&#39;equal&#39;</span><span class="p">)</span>  <span class="c1"># Equal aspect ratio ensures that pie is drawn as a circle.</span>

<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>1. How much of the total loan amount has Kiva financed?
</pre></div>
</div>
<img alt="_images/kiva_16_1.png" src="_images/kiva_16_1.png" />
</div>
</div>
<div class="cell tag_hide-input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">2. How much money have Kiva donors contributed over time?</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">,</span> <span class="s1">&#39;DAILY CONTRIBUTIONS OF KIVA DONORS AS A COLLECTIVE&#39;</span><span class="p">)</span>
<span class="c1"># convert datetime values to appropriate formats</span>
<span class="n">loan_data</span><span class="p">[</span><span class="s1">&#39;posted_time&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">loan_data</span><span class="p">[</span><span class="s1">&#39;posted_time&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="s1">&#39;datetime64&#39;</span><span class="p">)</span>
<span class="n">loan_data</span><span class="p">[</span><span class="s1">&#39;disbursed_time&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">loan_data</span><span class="p">[</span><span class="s1">&#39;disbursed_time&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="s1">&#39;datetime64&#39;</span><span class="p">)</span>
<span class="n">loan_data</span><span class="p">[</span><span class="s1">&#39;funded_time&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">loan_data</span><span class="p">[</span><span class="s1">&#39;funded_time&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="s1">&#39;datetime64&#39;</span><span class="p">)</span>

<span class="c1"># pick out dates</span>
<span class="n">loan_data</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span><span class="s1">&#39;disbursement_date&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">loan_data</span><span class="p">[</span><span class="s1">&#39;disbursed_time&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">dt</span><span class="o">.</span><span class="n">date</span>

<span class="c1"># create a pivot-table</span>
<span class="n">tab1</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">pivot_table</span><span class="p">(</span><span class="n">loan_data</span><span class="p">,</span> <span class="n">values</span><span class="o">=</span><span class="s1">&#39;funded_amount&#39;</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;disbursement_date&#39;</span><span class="p">],</span> <span class="n">aggfunc</span><span class="o">=</span><span class="s1">&#39;sum&#39;</span><span class="p">)</span>

<span class="c1"># plot this table</span>
<span class="kn">from</span> <span class="nn">pandas.plotting</span> <span class="kn">import</span> <span class="n">register_matplotlib_converters</span>
<span class="n">register_matplotlib_converters</span><span class="p">()</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">tab1</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="n">tab1</span><span class="p">[</span><span class="s1">&#39;funded_amount&#39;</span><span class="p">])</span>

<span class="c1"># rotate and align the tick labels so they look better</span>
<span class="n">fig</span><span class="o">.</span><span class="n">autofmt_xdate</span><span class="p">()</span>

<span class="c1"># declare the title and show the completed graph</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Dates&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Funded amount (in million USD)&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>2. How much money have Kiva donors contributed over time?


 DAILY CONTRIBUTIONS OF KIVA DONORS AS A COLLECTIVE
</pre></div>
</div>
<img alt="_images/kiva_17_1.png" src="_images/kiva_17_1.png" />
</div>
</div>
<div class="cell tag_hide-input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">3. How much money have Kiva donors given to individual loans?</span><span class="se">\n\n</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># create a pivot-table</span>
<span class="n">loan_count_per_funded_amount</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">pivot_table</span><span class="p">(</span><span class="n">loan_data</span><span class="p">,</span> <span class="n">values</span><span class="o">=</span><span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;funded_amount&#39;</span><span class="p">],</span> <span class="n">aggfunc</span><span class="o">=</span><span class="s1">&#39;count&#39;</span><span class="p">)</span>

<span class="c1"># rename the column</span>
<span class="n">loan_count_per_funded_amount</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;number_of_loans&#39;</span><span class="p">]</span>

<span class="c1"># sort the results in descending order</span>
<span class="n">loan_count_per_funded_amount</span> <span class="o">=</span> <span class="n">loan_count_per_funded_amount</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;number_of_loans&#39;</span><span class="p">],</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

<span class="c1"># and display top 10 results</span>
<span class="n">amounts</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;225&#39;</span><span class="p">,</span><span class="s1">&#39;300&#39;</span><span class="p">,</span><span class="s1">&#39;200&#39;</span><span class="p">,</span><span class="s1">&#39;500&#39;</span><span class="p">,</span><span class="s1">&#39;250&#39;</span><span class="p">,</span><span class="s1">&#39;125&#39;</span><span class="p">,</span><span class="s1">&#39;400&#39;</span><span class="p">,</span><span class="s1">&#39;350&#39;</span><span class="p">,</span><span class="s1">&#39;325&#39;</span><span class="p">,</span><span class="s1">&#39;275&#39;</span><span class="p">]</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
<span class="n">ax</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">amounts</span><span class="p">,</span><span class="n">loan_count_per_funded_amount</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">10</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span><span class="n">color</span><span class="o">=</span><span class="s1">&#39;#7e81c4&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Number of loans&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xticklabels</span><span class="p">(</span><span class="n">labels</span><span class="o">=</span><span class="n">amounts</span><span class="p">,</span> <span class="n">rotation</span> <span class="o">=</span> <span class="p">(</span><span class="mi">90</span><span class="p">),</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">10</span><span class="p">,</span> <span class="n">va</span><span class="o">=</span><span class="s1">&#39;top&#39;</span><span class="p">,</span> <span class="n">ha</span><span class="o">=</span><span class="s1">&#39;left&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Top 10 fund amounts given to each loan (in USD)&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;THE MOST COMMON KIVA DONATION AMOUNTS&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>3. How much money have Kiva donors given to individual loans?
</pre></div>
</div>
<img alt="_images/kiva_18_1.png" src="_images/kiva_18_1.png" />
</div>
</div>
<div class="cell tag_hide-input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">4. How much money have Kiva donors given to individual countries?</span><span class="se">\n\n</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># create a pivot-table</span>
<span class="n">tab2</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">pivot_table</span><span class="p">(</span><span class="n">loan_data</span><span class="p">,</span> <span class="n">values</span><span class="o">=</span><span class="s1">&#39;funded_amount&#39;</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;country&#39;</span><span class="p">],</span> <span class="n">aggfunc</span><span class="o">=</span><span class="s1">&#39;sum&#39;</span><span class="p">)</span>

<span class="c1"># sort the results in descending order</span>
<span class="n">tab2</span> <span class="o">=</span> <span class="n">tab2</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;funded_amount&#39;</span><span class="p">],</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

<span class="c1"># rename the aggregated column to an appropiate label</span>
<span class="n">tab2</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;sum_of_funded_amount&#39;</span><span class="p">]</span>

<span class="c1"># make some index entries into columns</span>
<span class="n">tab2</span> <span class="o">=</span> <span class="n">tab2</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;country&#39;</span><span class="p">])</span>

<span class="c1"># and display top 10 results</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
<span class="n">ax</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">tab2</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">10</span><span class="p">,</span><span class="mi">0</span><span class="p">],(</span><span class="n">tab2</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">10</span><span class="p">,</span><span class="mi">1</span><span class="p">]</span><span class="o">/</span><span class="mi">1000000</span><span class="p">),</span><span class="n">color</span><span class="o">=</span><span class="s1">&#39;#7e81c4&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Funding in million USD&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xticklabels</span><span class="p">(</span><span class="n">labels</span><span class="o">=</span><span class="n">tab2</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">10</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span> <span class="n">rotation</span> <span class="o">=</span> <span class="p">(</span><span class="mi">90</span><span class="p">),</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">10</span><span class="p">,</span> <span class="n">va</span><span class="o">=</span><span class="s1">&#39;top&#39;</span><span class="p">,</span> <span class="n">ha</span><span class="o">=</span><span class="s1">&#39;left&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Top 10 countries&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;COUNTRIES THAT RECEIVED THE MOST IN KIVA FUNDING&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>4. How much money have Kiva donors given to individual countries?
</pre></div>
</div>
<img alt="_images/kiva_19_1.png" src="_images/kiva_19_1.png" />
</div>
</div>
<div class="cell tag_hide-input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># create a pivot-table</span>
<span class="n">loans_per_country</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">pivot_table</span><span class="p">(</span><span class="n">loan_data</span><span class="p">,</span> <span class="n">values</span><span class="o">=</span><span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;country&#39;</span><span class="p">],</span> <span class="n">aggfunc</span><span class="o">=</span><span class="s1">&#39;count&#39;</span><span class="p">)</span>

<span class="c1"># sort the results in descending order</span>
<span class="n">loans_per_country</span> <span class="o">=</span> <span class="n">loans_per_country</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">],</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

<span class="c1"># rename the aggregated column to an appropiate label</span>
<span class="n">loans_per_country</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;number_of_loans&#39;</span><span class="p">]</span>

<span class="c1"># make some index entries into columns</span>
<span class="n">loans_per_country</span> <span class="o">=</span> <span class="n">loans_per_country</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;country&#39;</span><span class="p">])</span>

<span class="c1"># and display top 10 results</span>
<span class="n">loans_per_country</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>

<span class="c1"># and display top 10 results</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
<span class="n">ax</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">loans_per_country</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">10</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span><span class="n">loans_per_country</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">10</span><span class="p">,</span><span class="mi">1</span><span class="p">],</span><span class="n">color</span><span class="o">=</span><span class="s1">&#39;#7e81c4&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Number of loans&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xticklabels</span><span class="p">(</span><span class="n">labels</span><span class="o">=</span><span class="n">tab2</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">10</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span> <span class="n">rotation</span> <span class="o">=</span> <span class="p">(</span><span class="mi">90</span><span class="p">),</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">10</span><span class="p">,</span> <span class="n">va</span><span class="o">=</span><span class="s1">&#39;top&#39;</span><span class="p">,</span> <span class="n">ha</span><span class="o">=</span><span class="s1">&#39;left&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Top 10 countries&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;COUNTRIES THAT HAD THE HIGHEST NUMBER OF LOANS ON KIVA&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/kiva_20_0.png" src="_images/kiva_20_0.png" />
</div>
</div>
</div>
</div>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
            
                <!-- Previous / next buttons -->
<div class='prev-next-area'> 
    <a class='left-prev' id="prev-link" href="data-storytelling.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">Welcome to Data Storytelling!</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="data-pipelining.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Welcome to Data Pipelining!</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
            
        </div>
    </div>
    <footer class="footer">
  <p>
    
      By Cynthia Thinwa<br/>
    
        &copy; Copyright 2022.<br/>
  </p>
</footer>
</main>


      </div>
    </div>
  
  <script src="_static/js/index.be7d3bbb2ef33a8344ce.js"></script>

  </body>
</html>