
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Kiva Project &#8212; My Knowledge Hub</title>
    
  <link href="_static/css/theme.css" rel="stylesheet">
  <link href="_static/css/index.ff1ffe594081f20da1ef19478df9384b.css" rel="stylesheet">

    
  <link rel="stylesheet"
    href="_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-book-theme.css?digest=c3fdc42140077d1ad13ad2f1588a4309" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="_static/custom.css" />
    <link rel="stylesheet" type="text/css" href="_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="_static/js/index.be7d3bbb2ef33a8344ce.js">

    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/clipboard.min.js"></script>
    <script src="_static/copybutton.js"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="_static/sphinx-book-theme.d59cb220de22ca1c485ebbdc042f0030.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="_static/sphinx-thebe.js"></script>
    <link rel="shortcut icon" href="_static/favicon.png"/>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Welcome to Data Pipelining!" href="data-pipelining.html" />
    <link rel="prev" title="Welcome to Data Storytelling!" href="data-storytelling.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="index.html">
      
        <!-- `logo` is deprecated in Sphinx 4.0, so remove this when we stop supporting 3 -->
        
      
      
      <img src="_static/logo.png" class="logo" alt="logo">
      
      
      <h1 class="site-logo" id="site-title">My Knowledge Hub</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        <ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="intro.html">
   Hello ðŸ‘‹
  </a>
 </li>
</ul>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="computer-vision.html">
   Welcome to Computer Vision!
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="nlp.html">
   Welcome to Natural Language Processing!
  </a>
 </li>
 <li class="toctree-l1 current active has-children">
  <a class="reference internal" href="data-storytelling.html">
   Welcome to Data Storytelling!
  </a>
  <input checked="" class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul class="current">
   <li class="toctree-l2 current active">
    <a class="current reference internal" href="#">
     Kiva Project
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="data-pipelining.html">
   Welcome to Data Pipelining!
  </a>
 </li>
</ul>

    </div>
</nav> <!-- To handle the deprecated key -->

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="topbar container-xl fixed-top">
    <div class="topbar-contents row">
        <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show"></div>
        <div class="col pl-md-4 topbar-main">
            
            <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
                data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
                aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
                title="Toggle navigation" data-toggle="tooltip" data-placement="left">
                <i class="fas fa-bars"></i>
                <i class="fas fa-arrow-left"></i>
                <i class="fas fa-arrow-up"></i>
            </button>
            
            
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="_sources/kiva.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.ipynb</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
                onclick="printPdf(this)" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

            <!-- Source interaction buttons -->

            <!-- Full screen (wrap in <a> to have style consistency -->

<a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
        data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
        title="Fullscreen mode"><i
            class="fas fa-expand"></i></button></a>

            <!-- Launch buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Launch interactive content"><i class="fas fa-rocket"></i></button>
    <div class="dropdown-buttons">
        
        <a class="binder-button" href="https://mybinder.org/v2/gh/executablebooks/jupyter-book/main?urlpath=tree/book/kiva.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Launch Binder" data-toggle="tooltip"
                data-placement="left"><img class="binder-button-logo"
                    src="_static/images/logo_binder.svg"
                    alt="Interact on binder">Binder</button></a>
        
        
        
        
    </div>
</div>

        </div>

        <!-- Table of contents -->
        <div class="d-none d-md-block col-md-2 bd-toc show noprint">
            
            <div class="tocsection onthispage pt-5 pb-3">
                <i class="fas fa-list"></i> Contents
            </div>
            <nav id="bd-toc-nav" aria-label="Page">
                <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#problem">
   PROBLEM:
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#context">
     Context
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#problem-statement">
     Problem statement
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#personal-disclaimer">
     Personal disclaimer
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#solution">
   SOLUTION:
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#python-packages-functions">
     Python Packages &amp; Functions
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#data">
     Data
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#original-data">
       1. Original Data
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#supplementary-data">
       2. Supplementary Data
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#data-summary">
       Data Summary
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#exploratory-data-analysis">
     Exploratory Data Analysis
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#the-impact-of-kiva-donors">
       The impact of KIVA donors
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#the-characteristics-of-kiva-borrowers">
       The characteristics of KIVA borrowers
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#global-welfare">
       Global welfare
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
</ul>

            </nav>
        </div>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>Kiva Project</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#problem">
   PROBLEM:
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#context">
     Context
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#problem-statement">
     Problem statement
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#personal-disclaimer">
     Personal disclaimer
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#solution">
   SOLUTION:
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#python-packages-functions">
     Python Packages &amp; Functions
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#data">
     Data
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#original-data">
       1. Original Data
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#supplementary-data">
       2. Supplementary Data
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#data-summary">
       Data Summary
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#exploratory-data-analysis">
     Exploratory Data Analysis
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#the-impact-of-kiva-donors">
       The impact of KIVA donors
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#the-characteristics-of-kiva-borrowers">
       The characteristics of KIVA borrowers
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#global-welfare">
       Global welfare
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            
              <div>
                
  <div class="tex2jax_ignore mathjax_ignore section" id="kiva-project">
<h1>Kiva Project<a class="headerlink" href="#kiva-project" title="Permalink to this headline">Â¶</a></h1>
<p><strong>(adapted from <a class="reference external" href="https://bit.ly/2J7G9f8">https://bit.ly/2J7G9f8</a>)</strong></p>
<div class="section" id="problem">
<h2>PROBLEM:<a class="headerlink" href="#problem" title="Permalink to this headline">Â¶</a></h2>
<div class="section" id="context">
<h3>Context<a class="headerlink" href="#context" title="Permalink to this headline">Â¶</a></h3>
<p><a class="reference external" href="http://Kiva.org">Kiva.org</a> is an online crowdfunding platform to extend financial services to poor and financially excluded people around the world. Kiva lenders have provided over $1 billion dollars in loans to over 2 million people.</p>
<p>In order to set investment priorities, help inform lenders, and understand their target communities, knowing the level of poverty of each borrower is critical. However, this requires inference based on a limited set of information for each borrower.</p>
<p>Submissions in this challenge will take the form of Python data analysis.</p>
<p>Kiva has provided a dataset of loans issued over the 2014-2018 time period, and participants are invited to use this data as well as source external public datasets to help Kiva build models for assessing borrower welfare levels. With a stronger understanding of their borrowers and their poverty levels, Kiva will be able to better assess and maximize the impact of their work.</p>
</div>
<div class="section" id="problem-statement">
<h3>Problem statement<a class="headerlink" href="#problem-statement" title="Permalink to this headline">Â¶</a></h3>
<p>For the locations in which Kiva has active loans, the objective is to pair Kivaâ€™s data with additional data sources to estimate the welfare level of borrowers in specific regions, based on shared economic and demographic characteristics.</p>
<p>A good solution would connect the features of each loan or product to one of several poverty mapping datasets, which indicate the average level of welfare in a region on as granular a level as possible. Many datasets indicate the poverty rate in a given area, with varying levels of granularity. Kiva would like to be able to disaggregate these regional averages by gender, sector, or borrowing behavior in order to estimate a Kiva borrowerâ€™s level of welfare using all of the relevant information about them. Strong submissions will attempt to map vaguely described locations to more accurate geocodes.</p>
</div>
<div class="section" id="personal-disclaimer">
<h3>Personal disclaimer<a class="headerlink" href="#personal-disclaimer" title="Permalink to this headline">Â¶</a></h3>
<p>From a research perspective, the results obtained are never going to be a full representation of the realities that borrowers experience. It is meant to spark a discussion around how we can identify the welfare level of borrowers and improve them where we can.</p>
</div>
</div>
<div class="section" id="solution">
<h2>SOLUTION:<a class="headerlink" href="#solution" title="Permalink to this headline">Â¶</a></h2>
<div class="section" id="python-packages-functions">
<h3>Python Packages &amp; Functions<a class="headerlink" href="#python-packages-functions" title="Permalink to this headline">Â¶</a></h3>
<p>Here we upload all the Python packages and datasets required for analysis.</p>
<div class="cell tag_hide-input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Packages</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">matplotlib.dates</span> <span class="k">as</span> <span class="nn">mdates</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="data">
<h3>Data<a class="headerlink" href="#data" title="Permalink to this headline">Â¶</a></h3>
<div class="section" id="original-data">
<h4>1. Original Data<a class="headerlink" href="#original-data" title="Permalink to this headline">Â¶</a></h4>
<div class="cell tag_hide-input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">loan_data</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;C://Users//CT//Documents//GitHub//knowledge-hub//book//data//kiva-project//kiva_loans.csv&#39;</span><span class="p">)</span>

<span class="n">location_data</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;C://Users//CT//Documents//GitHub//knowledge-hub//book//data//kiva-project//kiva_mpi_region_locations.csv&#39;</span><span class="p">)</span>

<span class="n">loan_themes</span>  <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;C://Users//CT//Documents//GitHub//knowledge-hub//book//data//kiva-project//loan_theme_ids.csv&#39;</span><span class="p">)</span>

<span class="n">regional_lts</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;C://Users//CT//Documents//GitHub//knowledge-hub//book//data//kiva-project//loan_themes_by_region.csv&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell tag_hide-input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">dfs</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;loan_data&#39;</span><span class="p">:</span><span class="n">loan_data</span><span class="p">,</span> <span class="s1">&#39;location_data&#39;</span><span class="p">:</span><span class="n">location_data</span><span class="p">,</span>
       <span class="s1">&#39;loan_themes&#39;</span><span class="p">:</span><span class="n">loan_themes</span><span class="p">,</span> <span class="s1">&#39;regional_lts&#39;</span><span class="p">:</span><span class="n">regional_lts</span><span class="p">}</span>

<span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">dfs</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>

    <span class="nb">print</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">key</span><span class="o">+</span><span class="s1">&#39; shape:&#39;</span><span class="p">),</span> <span class="n">val</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>loan_data shape: (671205, 20)
location_data shape: (2772, 9)
loan_themes shape: (779092, 4)
regional_lts shape: (15736, 21)
</pre></div>
</div>
</div>
</div>
<br>
<p><u><strong>Descriptions of the original datasets</strong></u></p>
<p>There are four data sources provided by Kiva:</p>
<ul class="simple">
<li><p><em><strong>loan_data</strong></em></p>
<ol class="simple">
<li><p><strong>id</strong> - Unique ID for loan</p></li>
<li><p><strong>funded_amount</strong> - The amount disbursed by Kiva to the field agent (USD)</p></li>
<li><p><strong>loan_amount</strong> - The amount disbursed by the field agent to the borrower (USD)</p></li>
<li><p><strong>activity</strong> - More granular category</p></li>
<li><p><strong>sector</strong> - High level category</p></li>
<li><p><strong>use</strong> - Exact usage of loan amount</p></li>
<li><p><strong>country_code</strong> - ISO country code of country in which loan was disbursed</p></li>
<li><p><strong>country</strong> - Full country name of country in which loan was disbursed</p></li>
<li><p><strong>region</strong> - Full region name within the country</p></li>
<li><p><strong>currency</strong> - The currency in which the loan was disbursed</p></li>
<li><p><strong>partner_id</strong> - ID of partner organization</p></li>
<li><p><strong>posted_time</strong> - The time at which the loan is posted on Kiva by the field agent</p></li>
<li><p><strong>disbursed_time</strong> - The time at which the loan is disbursed by the field agent to the borrower</p></li>
<li><p><strong>funded_time</strong> - The time at which the loan posted to Kiva gets funded by lenders completely</p></li>
<li><p><strong>term_in_months</strong> - The duration for which the loan was disbursed in months</p></li>
<li><p><strong>lender_count</strong> - The total number of lenders that contributed to this loan</p></li>
<li><p><strong>tags</strong></p></li>
<li><p><strong>borrower_genders</strong> - Comma separated M,F letters, where each instance represents a single male/female in the group</p></li>
<li><p><strong>repayment_interval</strong></p></li>
<li><p><strong>date</strong></p></li>
</ol>
</li>
</ul>
<ul class="simple">
<li><p><em><strong>location_data</strong></em></p>
<ol class="simple">
<li><p><strong>LocationName</strong> - region, country</p></li>
<li><p><strong>ISO</strong> - some sort of unique abbreviation for country</p></li>
<li><p><strong>country</strong> - country</p></li>
<li><p><strong>region</strong> - region within country</p></li>
<li><p><strong>world_region</strong> - parts of the world</p></li>
<li><p><strong>MPI</strong> - multidimensional poverty index</p></li>
<li><p><strong>geo</strong> - (latitude, longitude)</p></li>
<li><p><strong>lat</strong> - latitude</p></li>
<li><p><strong>lon</strong> - longitude</p></li>
</ol>
</li>
</ul>
<ul class="simple">
<li><p><em><strong>loan_themes</strong></em></p>
<ol class="simple">
<li><p><strong>id</strong> - Unique ID for loan (Loan ID)</p></li>
<li><p><strong>Loan Theme ID</strong> - ID for Loan Theme</p></li>
<li><p><strong>Loan Theme Type</strong> - Category name of type of loan</p></li>
<li><p><strong>Partner ID</strong></p></li>
</ol>
</li>
</ul>
<ul class="simple">
<li><p><em><strong>regional_lts</strong></em></p>
<ol class="simple">
<li><p><strong>Partner ID</strong></p></li>
<li><p><strong>Field Partner Name</strong></p></li>
<li><p><strong>sector</strong></p></li>
<li><p><strong>Loan Theme ID</strong></p></li>
<li><p><strong>Loan Theme Type</strong></p></li>
<li><p><strong>country</strong></p></li>
<li><p><strong>forkiva</strong></p></li>
<li><p><strong>region</strong></p></li>
<li><p><strong>geocode_old</strong></p></li>
<li><p><strong>ISO</strong></p></li>
<li><p><strong>number</strong></p></li>
<li><p><strong>amount</strong></p></li>
<li><p><strong>LocationName</strong></p></li>
<li><p><strong>geocode</strong></p></li>
<li><p><strong>names</strong></p></li>
<li><p><strong>geo</strong></p></li>
<li><p><strong>lat</strong></p></li>
<li><p><strong>lon</strong></p></li>
<li><p><strong>mpi_region</strong></p></li>
<li><p><strong>mpi_geo</strong></p></li>
<li><p><strong>rural_pct</strong></p></li>
</ol>
</li>
</ul>
<br>
</div>
<div class="section" id="supplementary-data">
<h4>2. Supplementary Data<a class="headerlink" href="#supplementary-data" title="Permalink to this headline">Â¶</a></h4>
<p>In this section, we aim to gather the following data from the World Bank:</p>
<p><a class="reference external" href="https://www.quora.com/What-does-per-capita-expenditure-mean?share=1">Per Capita Expenditure (PCE)</a> for each country - this is the total market value of all purchases in a country divided by that countryâ€™s total population (data: <a class="reference external" href="https://bit.ly/3blw0be">https://bit.ly/3blw0be</a>)</p>
<div class="cell tag_hide-input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Per Capita Expenditure</span>
<span class="n">PCE_data</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;C://Users//CT//Documents//GitHub//knowledge-hub//book//data//kiva-project//PCE data.tsv&#39;</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s1">&#39;</span><span class="se">\t</span><span class="s1">&#39;</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;PCE data shape:&#39;</span><span class="p">,</span><span class="n">PCE_data</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>PCE data shape: (225, 54)
</pre></div>
</div>
</div>
</div>
<div class="cell tag_hide-input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># add this dataset to the dictionary</span>
<span class="n">dfs</span><span class="p">[</span><span class="s1">&#39;PCE_data&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">PCE_data</span>

<span class="n">dfs</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>dict_keys([&#39;loan_data&#39;, &#39;location_data&#39;, &#39;loan_themes&#39;, &#39;regional_lts&#39;, &#39;PCE_data&#39;])
</pre></div>
</div>
</div>
</div>
<br>
</div>
<div class="section" id="data-summary">
<h4>Data Summary<a class="headerlink" href="#data-summary" title="Permalink to this headline">Â¶</a></h4>
<div class="cell tag_hide-input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">dfs</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>

    <span class="c1"># 1. Get the summary table</span>
    <span class="n">num_summary</span> <span class="o">=</span> <span class="n">val</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span>
    <span class="n">cat_summary</span> <span class="o">=</span> <span class="n">val</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span><span class="n">val</span><span class="o">.</span><span class="n">dtypes</span><span class="o">==</span><span class="n">np</span><span class="o">.</span><span class="n">object</span><span class="p">]</span><span class="o">.</span><span class="n">describe</span><span class="p">(</span><span class="n">include</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;O&#39;</span><span class="p">])</span>
    
    <span class="c1"># 2. Display it</span>

    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">SUMMARY STATISTICS WITHOUT AGGREGATION: </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">key</span><span class="p">),</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
    
    <span class="n">display</span><span class="p">(</span><span class="n">num_summary</span><span class="p">)</span>
    
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
    
    <span class="n">display</span><span class="p">(</span><span class="n">cat_summary</span><span class="p">)</span>
    
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>SUMMARY STATISTICS WITHOUT AGGREGATION: loan_data 
</pre></div>
</div>
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>id</th>
      <th>funded_amount</th>
      <th>loan_amount</th>
      <th>partner_id</th>
      <th>term_in_months</th>
      <th>lender_count</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>count</th>
      <td>6.712050e+05</td>
      <td>671205.000000</td>
      <td>671205.000000</td>
      <td>657698.000000</td>
      <td>671205.000000</td>
      <td>671205.000000</td>
    </tr>
    <tr>
      <th>mean</th>
      <td>9.932486e+05</td>
      <td>785.995061</td>
      <td>842.397107</td>
      <td>178.199616</td>
      <td>13.739022</td>
      <td>20.590922</td>
    </tr>
    <tr>
      <th>std</th>
      <td>1.966113e+05</td>
      <td>1130.398941</td>
      <td>1198.660073</td>
      <td>94.247581</td>
      <td>8.598919</td>
      <td>28.459551</td>
    </tr>
    <tr>
      <th>min</th>
      <td>6.530470e+05</td>
      <td>0.000000</td>
      <td>25.000000</td>
      <td>9.000000</td>
      <td>1.000000</td>
      <td>0.000000</td>
    </tr>
    <tr>
      <th>25%</th>
      <td>8.230720e+05</td>
      <td>250.000000</td>
      <td>275.000000</td>
      <td>126.000000</td>
      <td>8.000000</td>
      <td>7.000000</td>
    </tr>
    <tr>
      <th>50%</th>
      <td>9.927800e+05</td>
      <td>450.000000</td>
      <td>500.000000</td>
      <td>145.000000</td>
      <td>13.000000</td>
      <td>13.000000</td>
    </tr>
    <tr>
      <th>75%</th>
      <td>1.163653e+06</td>
      <td>900.000000</td>
      <td>1000.000000</td>
      <td>204.000000</td>
      <td>14.000000</td>
      <td>24.000000</td>
    </tr>
    <tr>
      <th>max</th>
      <td>1.340339e+06</td>
      <td>100000.000000</td>
      <td>100000.000000</td>
      <td>536.000000</td>
      <td>158.000000</td>
      <td>2986.000000</td>
    </tr>
  </tbody>
</table>
</div></div><div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>activity</th>
      <th>sector</th>
      <th>use</th>
      <th>country_code</th>
      <th>country</th>
      <th>region</th>
      <th>currency</th>
      <th>posted_time</th>
      <th>disbursed_time</th>
      <th>funded_time</th>
      <th>tags</th>
      <th>borrower_genders</th>
      <th>repayment_interval</th>
      <th>date</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>count</th>
      <td>671205</td>
      <td>671205</td>
      <td>666973</td>
      <td>671197</td>
      <td>671205</td>
      <td>614405</td>
      <td>671205</td>
      <td>671205</td>
      <td>668809</td>
      <td>622874</td>
      <td>499789</td>
      <td>666984</td>
      <td>671205</td>
      <td>671205</td>
    </tr>
    <tr>
      <th>unique</th>
      <td>163</td>
      <td>15</td>
      <td>424912</td>
      <td>86</td>
      <td>87</td>
      <td>12695</td>
      <td>67</td>
      <td>667399</td>
      <td>5719</td>
      <td>498007</td>
      <td>86719</td>
      <td>11298</td>
      <td>4</td>
      <td>1298</td>
    </tr>
    <tr>
      <th>top</th>
      <td>Farming</td>
      <td>Agriculture</td>
      <td>to buy a water filter to provide safe drinking...</td>
      <td>PH</td>
      <td>Philippines</td>
      <td>Kaduna</td>
      <td>PHP</td>
      <td>2017-05-15 00:00:00+00:00</td>
      <td>2017-02-01 08:00:00+00:00</td>
      <td>2016-09-21 13:03:24+00:00</td>
      <td>user_favorite</td>
      <td>female</td>
      <td>monthly</td>
      <td>2017-03-20</td>
    </tr>
    <tr>
      <th>freq</th>
      <td>72955</td>
      <td>180302</td>
      <td>5217</td>
      <td>160441</td>
      <td>160441</td>
      <td>10000</td>
      <td>160440</td>
      <td>25</td>
      <td>2800</td>
      <td>33</td>
      <td>27088</td>
      <td>426502</td>
      <td>342717</td>
      <td>1308</td>
    </tr>
  </tbody>
</table>
</div></div><div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>SUMMARY STATISTICS WITHOUT AGGREGATION: location_data 
</pre></div>
</div>
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>MPI</th>
      <th>lat</th>
      <th>lon</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>count</th>
      <td>984.000000</td>
      <td>892.000000</td>
      <td>892.000000</td>
    </tr>
    <tr>
      <th>mean</th>
      <td>0.211330</td>
      <td>9.169710</td>
      <td>16.635888</td>
    </tr>
    <tr>
      <th>std</th>
      <td>0.183621</td>
      <td>16.484531</td>
      <td>61.234566</td>
    </tr>
    <tr>
      <th>min</th>
      <td>0.000000</td>
      <td>-34.947896</td>
      <td>-122.747131</td>
    </tr>
    <tr>
      <th>25%</th>
      <td>0.053000</td>
      <td>-1.027901</td>
      <td>-12.819854</td>
    </tr>
    <tr>
      <th>50%</th>
      <td>0.155000</td>
      <td>11.211379</td>
      <td>26.419389</td>
    </tr>
    <tr>
      <th>75%</th>
      <td>0.341500</td>
      <td>18.084292</td>
      <td>47.019436</td>
    </tr>
    <tr>
      <th>max</th>
      <td>0.744000</td>
      <td>49.264748</td>
      <td>138.581284</td>
    </tr>
  </tbody>
</table>
</div></div><div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>LocationName</th>
      <th>ISO</th>
      <th>country</th>
      <th>region</th>
      <th>world_region</th>
      <th>geo</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>count</th>
      <td>984</td>
      <td>1008</td>
      <td>1008</td>
      <td>984</td>
      <td>1008</td>
      <td>2772</td>
    </tr>
    <tr>
      <th>unique</th>
      <td>984</td>
      <td>102</td>
      <td>102</td>
      <td>928</td>
      <td>6</td>
      <td>881</td>
    </tr>
    <tr>
      <th>top</th>
      <td>Badakhshan, Afghanistan</td>
      <td>NGA</td>
      <td>Nigeria</td>
      <td>Central</td>
      <td>Sub-Saharan Africa</td>
      <td>(1000.0, 1000.0)</td>
    </tr>
    <tr>
      <th>freq</th>
      <td>1</td>
      <td>37</td>
      <td>37</td>
      <td>8</td>
      <td>432</td>
      <td>1880</td>
    </tr>
  </tbody>
</table>
</div></div><div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>SUMMARY STATISTICS WITHOUT AGGREGATION: loan_themes 
</pre></div>
</div>
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>id</th>
      <th>Partner ID</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>count</th>
      <td>7.790920e+05</td>
      <td>764279.000000</td>
    </tr>
    <tr>
      <th>mean</th>
      <td>1.047475e+06</td>
      <td>180.825840</td>
    </tr>
    <tr>
      <th>std</th>
      <td>2.282538e+05</td>
      <td>97.914029</td>
    </tr>
    <tr>
      <th>min</th>
      <td>6.386310e+05</td>
      <td>9.000000</td>
    </tr>
    <tr>
      <th>25%</th>
      <td>8.499768e+05</td>
      <td>126.000000</td>
    </tr>
    <tr>
      <th>50%</th>
      <td>1.046528e+06</td>
      <td>145.000000</td>
    </tr>
    <tr>
      <th>75%</th>
      <td>1.244768e+06</td>
      <td>204.000000</td>
    </tr>
    <tr>
      <th>max</th>
      <td>1.444243e+06</td>
      <td>557.000000</td>
    </tr>
  </tbody>
</table>
</div></div><div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Loan Theme ID</th>
      <th>Loan Theme Type</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>count</th>
      <td>764279</td>
      <td>764279</td>
    </tr>
    <tr>
      <th>unique</th>
      <td>956</td>
      <td>203</td>
    </tr>
    <tr>
      <th>top</th>
      <td>a1050000000wf0q</td>
      <td>General</td>
    </tr>
    <tr>
      <th>freq</th>
      <td>110264</td>
      <td>380693</td>
    </tr>
  </tbody>
</table>
</div></div><div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>SUMMARY STATISTICS WITHOUT AGGREGATION: regional_lts 
</pre></div>
</div>
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Partner ID</th>
      <th>number</th>
      <th>amount</th>
      <th>lat</th>
      <th>lon</th>
      <th>rural_pct</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>count</th>
      <td>15736.000000</td>
      <td>15736.000000</td>
      <td>1.573600e+04</td>
      <td>13662.000000</td>
      <td>13662.000000</td>
      <td>14344.000000</td>
    </tr>
    <tr>
      <th>mean</th>
      <td>191.376144</td>
      <td>53.628432</td>
      <td>2.003991e+04</td>
      <td>14.328878</td>
      <td>29.433569</td>
      <td>68.084635</td>
    </tr>
    <tr>
      <th>std</th>
      <td>118.705003</td>
      <td>403.079799</td>
      <td>9.636941e+04</td>
      <td>16.757689</td>
      <td>83.255739</td>
      <td>26.550064</td>
    </tr>
    <tr>
      <th>min</th>
      <td>9.000000</td>
      <td>1.000000</td>
      <td>2.500000e+01</td>
      <td>-34.610548</td>
      <td>-172.790661</td>
      <td>0.000000</td>
    </tr>
    <tr>
      <th>25%</th>
      <td>123.000000</td>
      <td>1.000000</td>
      <td>9.500000e+02</td>
      <td>6.266728</td>
      <td>-71.967463</td>
      <td>60.000000</td>
    </tr>
    <tr>
      <th>50%</th>
      <td>154.000000</td>
      <td>4.000000</td>
      <td>2.600000e+03</td>
      <td>13.484101</td>
      <td>41.899993</td>
      <td>73.000000</td>
    </tr>
    <tr>
      <th>75%</th>
      <td>217.000000</td>
      <td>15.000000</td>
      <td>8.750000e+03</td>
      <td>22.189940</td>
      <td>106.677321</td>
      <td>85.000000</td>
    </tr>
    <tr>
      <th>max</th>
      <td>545.000000</td>
      <td>22538.000000</td>
      <td>4.929900e+06</td>
      <td>51.314017</td>
      <td>159.972900</td>
      <td>100.000000</td>
    </tr>
  </tbody>
</table>
</div></div><div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Field Partner Name</th>
      <th>sector</th>
      <th>Loan Theme ID</th>
      <th>Loan Theme Type</th>
      <th>country</th>
      <th>forkiva</th>
      <th>region</th>
      <th>geocode_old</th>
      <th>ISO</th>
      <th>LocationName</th>
      <th>geocode</th>
      <th>names</th>
      <th>geo</th>
      <th>mpi_region</th>
      <th>mpi_geo</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>count</th>
      <td>15736</td>
      <td>15736</td>
      <td>15736</td>
      <td>15736</td>
      <td>15736</td>
      <td>15736</td>
      <td>15736</td>
      <td>1200</td>
      <td>15722</td>
      <td>15736</td>
      <td>13662</td>
      <td>13661</td>
      <td>15736</td>
      <td>15722</td>
      <td>9671</td>
    </tr>
    <tr>
      <th>unique</th>
      <td>302</td>
      <td>11</td>
      <td>718</td>
      <td>170</td>
      <td>79</td>
      <td>2</td>
      <td>9526</td>
      <td>340</td>
      <td>77</td>
      <td>9561</td>
      <td>6557</td>
      <td>6275</td>
      <td>6558</td>
      <td>392</td>
      <td>335</td>
    </tr>
    <tr>
      <th>top</th>
      <td>Alalay sa Kaunlaran (ASKI)</td>
      <td>General Financial Inclusion</td>
      <td>a1050000000wf0V</td>
      <td>General</td>
      <td>Philippines</td>
      <td>No</td>
      <td>Chouf</td>
      <td>(-1.2833333, 36.8166667)</td>
      <td>PHL</td>
      <td>Chouf, Lebanon</td>
      <td>[(19.7126764, 105.8393447)]</td>
      <td>Philippines</td>
      <td>(1000.0, 1000.0)</td>
      <td>Northern Mindanao, Philippines</td>
      <td>(8.020163499999999, 124.6856509)</td>
    </tr>
    <tr>
      <th>freq</th>
      <td>1207</td>
      <td>13679</td>
      <td>1152</td>
      <td>5661</td>
      <td>3467</td>
      <td>13211</td>
      <td>25</td>
      <td>20</td>
      <td>3467</td>
      <td>25</td>
      <td>43</td>
      <td>137</td>
      <td>2074</td>
      <td>1174</td>
      <td>1174</td>
    </tr>
  </tbody>
</table>
</div></div><div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>SUMMARY STATISTICS WITHOUT AGGREGATION: PCE_data 
</pre></div>
</div>
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>1967</th>
      <th>1968</th>
      <th>1969</th>
      <th>1970</th>
      <th>1971</th>
      <th>1972</th>
      <th>1973</th>
      <th>1974</th>
      <th>1975</th>
      <th>1976</th>
      <th>1977</th>
      <th>1978</th>
      <th>1979</th>
      <th>1980</th>
      <th>1981</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>count</th>
      <td>217.000000</td>
      <td>217.000000</td>
      <td>217.000000</td>
      <td>217.000000</td>
      <td>217.000000</td>
      <td>217.000000</td>
      <td>217.000000</td>
      <td>217.000000</td>
      <td>217.000000</td>
      <td>217.000000</td>
      <td>217.000000</td>
      <td>217.000000</td>
      <td>217.000000</td>
      <td>217.000000</td>
      <td>218.000000</td>
    </tr>
    <tr>
      <th>mean</th>
      <td>15.956498</td>
      <td>16.280323</td>
      <td>16.624286</td>
      <td>16.971705</td>
      <td>17.329724</td>
      <td>17.681889</td>
      <td>18.028986</td>
      <td>18.379862</td>
      <td>18.722949</td>
      <td>19.057465</td>
      <td>19.390829</td>
      <td>19.729447</td>
      <td>20.077419</td>
      <td>20.428203</td>
      <td>20.699954</td>
    </tr>
    <tr>
      <th>std</th>
      <td>65.110375</td>
      <td>66.645947</td>
      <td>68.293438</td>
      <td>70.000670</td>
      <td>71.760259</td>
      <td>73.438521</td>
      <td>75.074430</td>
      <td>76.649920</td>
      <td>78.111491</td>
      <td>79.486030</td>
      <td>80.796125</td>
      <td>82.119866</td>
      <td>83.470633</td>
      <td>84.806632</td>
      <td>85.998259</td>
    </tr>
    <tr>
      <th>min</th>
      <td>0.000000</td>
      <td>0.010000</td>
      <td>0.010000</td>
      <td>0.010000</td>
      <td>0.010000</td>
      <td>0.010000</td>
      <td>0.010000</td>
      <td>0.010000</td>
      <td>0.010000</td>
      <td>0.010000</td>
      <td>0.010000</td>
      <td>0.010000</td>
      <td>0.010000</td>
      <td>0.010000</td>
      <td>0.010000</td>
    </tr>
    <tr>
      <th>25%</th>
      <td>0.270000</td>
      <td>0.280000</td>
      <td>0.290000</td>
      <td>0.300000</td>
      <td>0.300000</td>
      <td>0.300000</td>
      <td>0.300000</td>
      <td>0.300000</td>
      <td>0.300000</td>
      <td>0.310000</td>
      <td>0.310000</td>
      <td>0.320000</td>
      <td>0.340000</td>
      <td>0.360000</td>
      <td>0.370000</td>
    </tr>
    <tr>
      <th>50%</th>
      <td>2.740000</td>
      <td>2.790000</td>
      <td>2.850000</td>
      <td>2.930000</td>
      <td>2.990000</td>
      <td>3.040000</td>
      <td>3.110000</td>
      <td>3.190000</td>
      <td>3.270000</td>
      <td>3.330000</td>
      <td>3.360000</td>
      <td>3.460000</td>
      <td>3.550000</td>
      <td>3.620000</td>
      <td>3.680000</td>
    </tr>
    <tr>
      <th>75%</th>
      <td>8.950000</td>
      <td>9.260000</td>
      <td>9.590000</td>
      <td>9.660000</td>
      <td>9.670000</td>
      <td>9.870000</td>
      <td>9.920000</td>
      <td>9.990000</td>
      <td>10.170000</td>
      <td>10.440000</td>
      <td>10.650000</td>
      <td>10.680000</td>
      <td>10.810000</td>
      <td>11.060000</td>
      <td>11.190000</td>
    </tr>
    <tr>
      <th>max</th>
      <td>754.550000</td>
      <td>774.510000</td>
      <td>796.030000</td>
      <td>818.320000</td>
      <td>841.110000</td>
      <td>862.030000</td>
      <td>881.940000</td>
      <td>900.350000</td>
      <td>916.400000</td>
      <td>930.690000</td>
      <td>943.460000</td>
      <td>956.170000</td>
      <td>969.010000</td>
      <td>981.240000</td>
      <td>993.890000</td>
    </tr>
  </tbody>
</table>
</div></div><div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Country</th>
      <th>1982</th>
      <th>1983</th>
      <th>1984</th>
      <th>1985</th>
      <th>1986</th>
      <th>1987</th>
      <th>1988</th>
      <th>1989</th>
      <th>1990</th>
      <th>...</th>
      <th>2010</th>
      <th>2011</th>
      <th>2012</th>
      <th>2013</th>
      <th>2014</th>
      <th>2015</th>
      <th>2016</th>
      <th>2017</th>
      <th>2018</th>
      <th>2019</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>count</th>
      <td>225</td>
      <td>218</td>
      <td>218</td>
      <td>218</td>
      <td>218</td>
      <td>218</td>
      <td>218</td>
      <td>218</td>
      <td>218</td>
      <td>218</td>
      <td>...</td>
      <td>218</td>
      <td>218</td>
      <td>218</td>
      <td>218</td>
      <td>218</td>
      <td>218</td>
      <td>218</td>
      <td>218</td>
      <td>218</td>
      <td>218</td>
    </tr>
    <tr>
      <th>unique</th>
      <td>225</td>
      <td>182</td>
      <td>186</td>
      <td>184</td>
      <td>180</td>
      <td>185</td>
      <td>183</td>
      <td>182</td>
      <td>183</td>
      <td>187</td>
      <td>...</td>
      <td>190</td>
      <td>195</td>
      <td>190</td>
      <td>188</td>
      <td>191</td>
      <td>190</td>
      <td>191</td>
      <td>189</td>
      <td>192</td>
      <td>192</td>
    </tr>
    <tr>
      <th>top</th>
      <td>East Asia and Pacific</td>
      <td>0.01</td>
      <td>0.06</td>
      <td>0.06</td>
      <td>0.01</td>
      <td>0.01</td>
      <td>0.02</td>
      <td>0.04</td>
      <td>0.03</td>
      <td>0.03</td>
      <td>...</td>
      <td>0.03</td>
      <td>0.06</td>
      <td>0.06</td>
      <td>0.11</td>
      <td>0.06</td>
      <td>0.06</td>
      <td>0.06</td>
      <td>0.06</td>
      <td>0.06</td>
      <td>0.06</td>
    </tr>
    <tr>
      <th>freq</th>
      <td>1</td>
      <td>6</td>
      <td>6</td>
      <td>6</td>
      <td>6</td>
      <td>6</td>
      <td>5</td>
      <td>4</td>
      <td>5</td>
      <td>6</td>
      <td>...</td>
      <td>5</td>
      <td>5</td>
      <td>5</td>
      <td>5</td>
      <td>5</td>
      <td>5</td>
      <td>6</td>
      <td>6</td>
      <td>6</td>
      <td>6</td>
    </tr>
  </tbody>
</table>
<p>4 rows Ã— 39 columns</p>
</div></div><div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="section" id="exploratory-data-analysis">
<h3>Exploratory Data Analysis<a class="headerlink" href="#exploratory-data-analysis" title="Permalink to this headline">Â¶</a></h3>
<div class="section" id="the-impact-of-kiva-donors">
<h4>The impact of KIVA donors<a class="headerlink" href="#the-impact-of-kiva-donors" title="Permalink to this headline">Â¶</a></h4>
<p>In this section, we seek to explore the data to answer certain questions around KIVA donor contributions.</p>
<br>
<p><em><strong>1. How much of the total loan amount has Kiva financed?</strong></em></p>
<div class="cell tag_hide-input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># 1. Calculate the percentage of loan requests that have been funded</span>
<span class="n">percentage1</span> <span class="o">=</span> <span class="p">(</span><span class="n">loan_data</span><span class="o">.</span><span class="n">funded_amount</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span><span class="o">/</span><span class="n">loan_data</span><span class="o">.</span><span class="n">loan_amount</span><span class="o">.</span><span class="n">sum</span><span class="p">())</span><span class="o">*</span><span class="mi">100</span>
<span class="n">percentage1</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="n">percentage1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>

<span class="c1"># 2. Display the result</span>
<span class="n">status</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Financed by KIVA&#39;</span><span class="p">,</span><span class="s1">&#39;Not financed by KIVA&#39;</span><span class="p">]</span>

<span class="n">values</span> <span class="o">=</span> <span class="p">[</span><span class="n">percentage1</span><span class="p">,</span> <span class="p">(</span><span class="mi">100</span><span class="o">-</span><span class="n">percentage1</span><span class="p">)]</span>

<span class="n">fig1</span><span class="p">,</span> <span class="n">ax1</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>

<span class="n">ax1</span><span class="o">.</span><span class="n">pie</span><span class="p">(</span><span class="n">values</span><span class="p">,</span> <span class="n">labels</span><span class="o">=</span><span class="n">status</span><span class="p">,</span>
        <span class="n">autopct</span><span class="o">=</span><span class="s1">&#39;</span><span class="si">%1.2f%%</span><span class="s1">&#39;</span><span class="p">,</span>
        <span class="n">startangle</span><span class="o">=</span><span class="mi">90</span><span class="p">,</span>
        <span class="n">colors</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="s1">&#39;#7e81c4&#39;</span><span class="p">,</span><span class="s1">&#39;#cbcce7&#39;</span><span class="p">]))</span>

<span class="n">ax1</span><span class="o">.</span><span class="n">axis</span><span class="p">(</span><span class="s1">&#39;equal&#39;</span><span class="p">)</span>  <span class="c1"># Equal aspect ratio ensures that pie is drawn as a circle.</span>

<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/kiva_16_0.png" src="_images/kiva_16_0.png" />
</div>
</div>
<br>
<p><em><strong>2. How much money have Kiva donors contributed over time?</strong></em></p>
<div class="cell tag_hide-input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">,</span> <span class="s1">&#39;DAILY CONTRIBUTIONS OF KIVA DONORS AS A COLLECTIVE&#39;</span><span class="p">)</span>

<span class="c1"># convert datetime values to appropriate formats</span>
<span class="n">loan_data</span><span class="p">[</span><span class="s1">&#39;posted_time&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">loan_data</span><span class="p">[</span><span class="s1">&#39;posted_time&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="s1">&#39;datetime64&#39;</span><span class="p">)</span>
<span class="n">loan_data</span><span class="p">[</span><span class="s1">&#39;disbursed_time&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">loan_data</span><span class="p">[</span><span class="s1">&#39;disbursed_time&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="s1">&#39;datetime64&#39;</span><span class="p">)</span>
<span class="n">loan_data</span><span class="p">[</span><span class="s1">&#39;funded_time&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">loan_data</span><span class="p">[</span><span class="s1">&#39;funded_time&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="s1">&#39;datetime64&#39;</span><span class="p">)</span>

<span class="c1"># pick out dates</span>
<span class="n">loan_data</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span><span class="s1">&#39;disbursement_date&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">loan_data</span><span class="p">[</span><span class="s1">&#39;disbursed_time&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">dt</span><span class="o">.</span><span class="n">date</span>

<span class="c1"># create a pivot-table</span>
<span class="n">tab1</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">pivot_table</span><span class="p">(</span><span class="n">loan_data</span><span class="p">,</span> <span class="n">values</span><span class="o">=</span><span class="s1">&#39;funded_amount&#39;</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;disbursement_date&#39;</span><span class="p">],</span> <span class="n">aggfunc</span><span class="o">=</span><span class="s1">&#39;sum&#39;</span><span class="p">)</span>

<span class="c1"># plot this table</span>
<span class="kn">from</span> <span class="nn">pandas.plotting</span> <span class="kn">import</span> <span class="n">register_matplotlib_converters</span>
<span class="n">register_matplotlib_converters</span><span class="p">()</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>

<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">tab1</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="n">tab1</span><span class="p">[</span><span class="s1">&#39;funded_amount&#39;</span><span class="p">],</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;#7e81c4&#39;</span><span class="p">)</span>

<span class="c1"># rotate and align the tick labels so they look better</span>
<span class="n">fig</span><span class="o">.</span><span class="n">autofmt_xdate</span><span class="p">()</span>

<span class="c1"># declare the title and show the completed graph</span>

<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Dates&#39;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Funded amount (in million USD)&#39;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> DAILY CONTRIBUTIONS OF KIVA DONORS AS A COLLECTIVE
</pre></div>
</div>
<img alt="_images/kiva_18_1.png" src="_images/kiva_18_1.png" />
</div>
</div>
<br>
<p><em><strong>3. How much money have Kiva donors given to individual loans?</strong></em></p>
<div class="cell tag_hide-input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># create a pivot-table</span>
<span class="n">loan_count_per_funded_amount</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">pivot_table</span><span class="p">(</span><span class="n">loan_data</span><span class="p">,</span> <span class="n">values</span><span class="o">=</span><span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;funded_amount&#39;</span><span class="p">],</span> <span class="n">aggfunc</span><span class="o">=</span><span class="s1">&#39;count&#39;</span><span class="p">)</span>

<span class="c1"># rename the column</span>
<span class="n">loan_count_per_funded_amount</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;number_of_loans&#39;</span><span class="p">]</span>

<span class="c1"># sort the results in descending order</span>
<span class="n">loan_count_per_funded_amount</span> <span class="o">=</span> <span class="n">loan_count_per_funded_amount</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;number_of_loans&#39;</span><span class="p">],</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

<span class="c1"># and display top 10 results</span>
<span class="n">amounts</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;225&#39;</span><span class="p">,</span><span class="s1">&#39;300&#39;</span><span class="p">,</span><span class="s1">&#39;200&#39;</span><span class="p">,</span><span class="s1">&#39;500&#39;</span><span class="p">,</span><span class="s1">&#39;250&#39;</span><span class="p">,</span><span class="s1">&#39;125&#39;</span><span class="p">,</span><span class="s1">&#39;400&#39;</span><span class="p">,</span><span class="s1">&#39;350&#39;</span><span class="p">,</span><span class="s1">&#39;325&#39;</span><span class="p">,</span><span class="s1">&#39;275&#39;</span><span class="p">]</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>

<span class="n">ax</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">amounts</span><span class="p">,</span><span class="n">loan_count_per_funded_amount</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">10</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span><span class="n">color</span><span class="o">=</span><span class="s1">&#39;#7e81c4&#39;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Number of loans&#39;</span><span class="p">)</span>

<span class="n">ax</span><span class="o">.</span><span class="n">set_xticklabels</span><span class="p">(</span><span class="n">labels</span><span class="o">=</span><span class="n">amounts</span><span class="p">,</span> <span class="n">rotation</span> <span class="o">=</span> <span class="p">(</span><span class="mi">90</span><span class="p">),</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">10</span><span class="p">,</span> <span class="n">va</span><span class="o">=</span><span class="s1">&#39;top&#39;</span><span class="p">,</span> <span class="n">ha</span><span class="o">=</span><span class="s1">&#39;left&#39;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Top 10 fund amounts given to each loan (in USD)&#39;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;THE MOST COMMON KIVA DONATION AMOUNTS&#39;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/kiva_20_0.png" src="_images/kiva_20_0.png" />
</div>
</div>
<br>
<p><em><strong>4. How much money have Kiva donors given to individual countries?</strong></em></p>
<div class="cell tag_hide-input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># create a pivot-table</span>
<span class="n">tab2</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">pivot_table</span><span class="p">(</span><span class="n">loan_data</span><span class="p">,</span> <span class="n">values</span><span class="o">=</span><span class="s1">&#39;funded_amount&#39;</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;country&#39;</span><span class="p">],</span> <span class="n">aggfunc</span><span class="o">=</span><span class="s1">&#39;sum&#39;</span><span class="p">)</span>

<span class="c1"># sort the results in descending order</span>
<span class="n">tab2</span> <span class="o">=</span> <span class="n">tab2</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;funded_amount&#39;</span><span class="p">],</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

<span class="c1"># rename the aggregated column to an appropiate label</span>
<span class="n">tab2</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;sum_of_funded_amount&#39;</span><span class="p">]</span>

<span class="c1"># make some index entries into columns</span>
<span class="n">tab2</span> <span class="o">=</span> <span class="n">tab2</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;country&#39;</span><span class="p">])</span>

<span class="c1"># and display top 10 results</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>

<span class="n">ax</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">tab2</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">10</span><span class="p">,</span><span class="mi">0</span><span class="p">],(</span><span class="n">tab2</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">10</span><span class="p">,</span><span class="mi">1</span><span class="p">]</span><span class="o">/</span><span class="mi">1000000</span><span class="p">),</span><span class="n">color</span><span class="o">=</span><span class="s1">&#39;#7e81c4&#39;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Funding in million USD&#39;</span><span class="p">)</span>

<span class="n">ax</span><span class="o">.</span><span class="n">set_xticklabels</span><span class="p">(</span><span class="n">labels</span><span class="o">=</span><span class="n">tab2</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">10</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span> <span class="n">rotation</span> <span class="o">=</span> <span class="p">(</span><span class="mi">90</span><span class="p">),</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">10</span><span class="p">,</span> <span class="n">va</span><span class="o">=</span><span class="s1">&#39;top&#39;</span><span class="p">,</span> <span class="n">ha</span><span class="o">=</span><span class="s1">&#39;left&#39;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Top 10 countries&#39;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;COUNTRIES THAT RECEIVED THE MOST IN KIVA FUNDING&#39;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/kiva_22_0.png" src="_images/kiva_22_0.png" />
</div>
</div>
<div class="cell tag_hide-input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># create a pivot-table</span>
<span class="n">loans_per_country</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">pivot_table</span><span class="p">(</span><span class="n">loan_data</span><span class="p">,</span> <span class="n">values</span><span class="o">=</span><span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;country&#39;</span><span class="p">],</span> <span class="n">aggfunc</span><span class="o">=</span><span class="s1">&#39;count&#39;</span><span class="p">)</span>

<span class="c1"># sort the results in descending order</span>
<span class="n">loans_per_country</span> <span class="o">=</span> <span class="n">loans_per_country</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">],</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

<span class="c1"># rename the aggregated column to an appropiate label</span>
<span class="n">loans_per_country</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;number_of_loans&#39;</span><span class="p">]</span>

<span class="c1"># make some index entries into columns</span>
<span class="n">loans_per_country</span> <span class="o">=</span> <span class="n">loans_per_country</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;country&#39;</span><span class="p">])</span>

<span class="c1"># and display top 10 results</span>
<span class="n">loans_per_country</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>

<span class="c1"># and display top 10 results</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>

<span class="n">ax</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">loans_per_country</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">10</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span><span class="n">loans_per_country</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">10</span><span class="p">,</span><span class="mi">1</span><span class="p">],</span><span class="n">color</span><span class="o">=</span><span class="s1">&#39;#7e81c4&#39;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Number of loans&#39;</span><span class="p">)</span>

<span class="n">ax</span><span class="o">.</span><span class="n">set_xticklabels</span><span class="p">(</span><span class="n">labels</span><span class="o">=</span><span class="n">tab2</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">10</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span> <span class="n">rotation</span> <span class="o">=</span> <span class="p">(</span><span class="mi">90</span><span class="p">),</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">10</span><span class="p">,</span> <span class="n">va</span><span class="o">=</span><span class="s1">&#39;top&#39;</span><span class="p">,</span> <span class="n">ha</span><span class="o">=</span><span class="s1">&#39;left&#39;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Top 10 countries&#39;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;COUNTRIES THAT HAD THE HIGHEST NUMBER OF LOANS ON KIVA&#39;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/kiva_23_0.png" src="_images/kiva_23_0.png" />
</div>
</div>
<p>This shows that the top 10 countries in terms of the number of loans and amount of funding from KIVA were the same and each country maintained its position.</p>
<p>Countries that had the highest contribution per loan were:</p>
<div class="cell tag_hide-input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># initial status message</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;The shape of tab2 before merge: &#39;</span><span class="p">,</span> <span class="n">tab2</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>

<span class="c1"># join the data, keeping only relevant entries</span>
<span class="n">tab2</span> <span class="o">=</span> <span class="n">tab2</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">loans_per_country</span><span class="p">,</span> <span class="n">on</span><span class="o">=</span><span class="s1">&#39;country&#39;</span><span class="p">)</span>

<span class="c1"># final status message</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;The shape of tab2 after merge: &#39;</span><span class="p">,</span> <span class="n">tab2</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>The shape of tab2 before merge:  (87, 2)
The shape of tab2 after merge:  (87, 3)
</pre></div>
</div>
</div>
</div>
<div class="cell tag_hide-input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># add a calculated column to the newly merged tab2</span>
<span class="n">tab2</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="s1">&#39;contribution_per_loan&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">tab2</span><span class="p">[</span><span class="s1">&#39;sum_of_funded_amount&#39;</span><span class="p">]</span><span class="o">/</span><span class="n">tab2</span><span class="p">[</span><span class="s1">&#39;number_of_loans&#39;</span><span class="p">]</span>

<span class="c1"># sort the results in descending order</span>
<span class="n">tab2</span> <span class="o">=</span> <span class="n">tab2</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;contribution_per_loan&#39;</span><span class="p">],</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

<span class="c1"># and display top 10 results</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>

<span class="n">ax</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">tab2</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">10</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span> <span class="nb">round</span><span class="p">(</span><span class="n">tab2</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">10</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span> <span class="mi">2</span><span class="p">),</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;#7e81c4&#39;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Kiva donor contribution per loan&#39;</span><span class="p">)</span>

<span class="n">ax</span><span class="o">.</span><span class="n">set_xticklabels</span><span class="p">(</span><span class="n">labels</span><span class="o">=</span><span class="n">tab2</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">10</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span> <span class="n">rotation</span> <span class="o">=</span> <span class="p">(</span><span class="mi">90</span><span class="p">),</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">10</span><span class="p">,</span> <span class="n">va</span><span class="o">=</span><span class="s1">&#39;top&#39;</span><span class="p">,</span> <span class="n">ha</span><span class="o">=</span><span class="s1">&#39;left&#39;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Top 10 countries&#39;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;COUNTRIES THAT HAD THE HIGHEST CONTRIBUTION PER LOAN ON KIVA&#39;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/kiva_26_0.png" src="_images/kiva_26_0.png" />
</div>
</div>
<p>Countries that had the lowest contribution per loan were:</p>
<div class="cell tag_hide-input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># add a calculated column to the newly merged tab2</span>
<span class="n">tab2</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="s1">&#39;contribution_per_loan&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">tab2</span><span class="p">[</span><span class="s1">&#39;sum_of_funded_amount&#39;</span><span class="p">]</span><span class="o">/</span><span class="n">tab2</span><span class="p">[</span><span class="s1">&#39;number_of_loans&#39;</span><span class="p">]</span>

<span class="c1"># sort the results in ascending order</span>
<span class="n">tab2</span> <span class="o">=</span> <span class="n">tab2</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;contribution_per_loan&#39;</span><span class="p">],</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="c1"># and display top 10 results</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>

<span class="n">ax</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">tab2</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">10</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span> <span class="nb">round</span><span class="p">(</span><span class="n">tab2</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">10</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span> <span class="mi">2</span><span class="p">),</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;#7e81c4&#39;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Kiva donor contribution per loan&#39;</span><span class="p">)</span>

<span class="n">ax</span><span class="o">.</span><span class="n">set_xticklabels</span><span class="p">(</span><span class="n">labels</span><span class="o">=</span><span class="n">tab2</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">10</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span> <span class="n">rotation</span> <span class="o">=</span> <span class="p">(</span><span class="mi">90</span><span class="p">),</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">10</span><span class="p">,</span> <span class="n">va</span><span class="o">=</span><span class="s1">&#39;top&#39;</span><span class="p">,</span> <span class="n">ha</span><span class="o">=</span><span class="s1">&#39;left&#39;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Bottom 10 countries&#39;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;COUNTRIES THAT HAD THE LOWEST CONTRIBUTION PER LOAN ON KIVA&#39;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/kiva_28_0.png" src="_images/kiva_28_0.png" />
</div>
</div>
<br>
<p><em><strong>5. What is the geographical footprint of where funds given by KIVA donors end up?</strong></em></p>
<div class="cell tag_hide-input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># make a copy of the loan_data dataset and combine it with partner data</span>
<span class="n">loan_data_copy</span> <span class="o">=</span> <span class="n">loan_data</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>

<span class="c1"># ensure that the common column is the same datatype and they share the same name</span>
<span class="c1"># the datatype chosen was float64 to preserve any decimal points</span>
<span class="nb">print</span><span class="p">(</span><span class="n">loan_data_copy</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span><span class="mi">10</span><span class="p">]</span><span class="o">.</span><span class="n">name</span><span class="p">)</span> <span class="c1"># original name; stays the same</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">regional_lts</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">name</span><span class="p">)</span> <span class="c1">#original name - will be changed</span>
<span class="c1">#change column name</span>
<span class="n">regional_lts</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;partner_id&#39;</span><span class="p">,</span> <span class="s1">&#39;Field Partner Name&#39;</span><span class="p">,</span> <span class="s1">&#39;sector&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;Loan Theme ID&#39;</span><span class="p">,</span> <span class="s1">&#39;Loan Theme Type&#39;</span><span class="p">,</span> <span class="s1">&#39;country&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;forkiva&#39;</span><span class="p">,</span> <span class="s1">&#39;region&#39;</span><span class="p">,</span> <span class="s1">&#39;geocode_old&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;ISO&#39;</span><span class="p">,</span> <span class="s1">&#39;number&#39;</span><span class="p">,</span> <span class="s1">&#39;amount&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;LocationName&#39;</span><span class="p">,</span> <span class="s1">&#39;geocode&#39;</span><span class="p">,</span> <span class="s1">&#39;names&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;geo&#39;</span><span class="p">,</span> <span class="s1">&#39;lat&#39;</span><span class="p">,</span> <span class="s1">&#39;lon&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;mpi_region&#39;</span><span class="p">,</span> <span class="s1">&#39;mpi_geo&#39;</span><span class="p">,</span> <span class="s1">&#39;rural_pct&#39;</span><span class="p">]</span>
<span class="c1"># confirm change</span>
<span class="nb">print</span><span class="p">(</span><span class="n">regional_lts</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>

<span class="c1"># change the datatype</span>
<span class="n">regional_lts</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">regional_lts</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="s1">&#39;float64&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>partner_id

Partner ID
partner_id
</pre></div>
</div>
</div>
</div>
<div class="cell tag_hide-input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># create a pivot-table</span>
<span class="n">tab3</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">pivot_table</span><span class="p">(</span><span class="n">loan_data_copy</span><span class="p">,</span> <span class="n">values</span><span class="o">=</span><span class="s1">&#39;funded_amount&#39;</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;partner_id&#39;</span><span class="p">],</span> <span class="n">aggfunc</span><span class="o">=</span><span class="s1">&#39;sum&#39;</span><span class="p">)</span>

<span class="c1"># sort the results in descending order</span>
<span class="n">tab3</span> <span class="o">=</span> <span class="n">tab3</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;funded_amount&#39;</span><span class="p">],</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

<span class="c1"># rename the aggregated column to an appropiate label</span>
<span class="n">tab3</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;sum_of_funded_amount&#39;</span><span class="p">]</span>

<span class="c1"># make some index entries into columns</span>
<span class="n">tab3</span> <span class="o">=</span> <span class="n">tab3</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;partner_id&#39;</span><span class="p">])</span>
</pre></div>
</div>
</div>
</div>
<div class="cell tag_hide-input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># create another pivot-table</span>
<span class="n">tab4</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">pivot_table</span><span class="p">(</span><span class="n">regional_lts</span><span class="p">,</span> <span class="n">values</span><span class="o">=</span><span class="s1">&#39;amount&#39;</span><span class="p">,</span>
                      <span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;partner_id&#39;</span><span class="p">,</span> <span class="s1">&#39;Field Partner Name&#39;</span><span class="p">,</span>
                             <span class="s1">&#39;country&#39;</span><span class="p">],</span>
                      <span class="n">aggfunc</span><span class="o">=</span><span class="s1">&#39;count&#39;</span><span class="p">)</span>

<span class="c1"># sort the results in descending order</span>
<span class="n">tab4</span> <span class="o">=</span> <span class="n">tab4</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;amount&#39;</span><span class="p">],</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

<span class="c1"># rename the aggregated column to an appropiate label</span>
<span class="n">tab4</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;count_of_amount&#39;</span><span class="p">]</span>

<span class="c1"># make some index entries into columns</span>
<span class="n">tab4</span> <span class="o">=</span> <span class="n">tab4</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;partner_id&#39;</span><span class="p">,</span> <span class="s1">&#39;Field Partner Name&#39;</span><span class="p">,</span> <span class="s1">&#39;country&#39;</span><span class="p">])</span>
</pre></div>
</div>
</div>
</div>
<div class="cell tag_hide-input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># create a third pivot-table</span>
<span class="n">tab5</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">pivot_table</span><span class="p">(</span><span class="n">loan_data_copy</span><span class="p">,</span> <span class="n">values</span><span class="o">=</span><span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;partner_id&#39;</span><span class="p">],</span> <span class="n">aggfunc</span><span class="o">=</span><span class="s1">&#39;count&#39;</span><span class="p">)</span>

<span class="c1"># sort the results in descending order</span>
<span class="n">tab5</span> <span class="o">=</span> <span class="n">tab5</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">],</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

<span class="c1"># rename the aggregated column to an appropiate label</span>
<span class="n">tab5</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;number_of_loans&#39;</span><span class="p">]</span>

<span class="c1"># make some index entries into columns</span>
<span class="n">tab5</span> <span class="o">=</span> <span class="n">tab5</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;partner_id&#39;</span><span class="p">])</span>
</pre></div>
</div>
</div>
</div>
<div class="cell tag_hide-input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># initial status message</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;The shape of tab3 before merge: &#39;</span><span class="p">,</span> <span class="n">tab3</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>

<span class="c1"># join the data, keeping only relevant entries</span>
<span class="n">tab3</span> <span class="o">=</span> <span class="n">tab3</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">tab5</span><span class="p">,</span> <span class="n">on</span><span class="o">=</span><span class="s1">&#39;partner_id&#39;</span><span class="p">)</span>

<span class="c1"># final status message</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;The shape of tab3 after merge: &#39;</span><span class="p">,</span> <span class="n">tab3</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>


<span class="c1"># initial status message</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;The shape of tab3 before merge: &#39;</span><span class="p">,</span> <span class="n">tab3</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>

<span class="c1"># join the data, keeping only relevant entries</span>
<span class="n">tab3</span> <span class="o">=</span> <span class="n">tab3</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">tab4</span><span class="p">,</span> <span class="n">on</span><span class="o">=</span><span class="s1">&#39;partner_id&#39;</span><span class="p">)</span>

<span class="c1"># final status message</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;The shape of tab3 after merge: &#39;</span><span class="p">,</span> <span class="n">tab3</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>


<span class="n">percentage2</span> <span class="o">=</span> <span class="n">tab3</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">/</span><span class="mi">366</span> <span class="o">*</span> <span class="mi">100</span>
<span class="n">percentage2</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="n">percentage2</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Out of the 366 partners that disbursed loans, KIVA had the contact details of &#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">percentage2</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39;</span><span class="si">% o</span><span class="s1">f them.&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>The shape of tab3 before merge:  (366, 2)
The shape of tab3 after merge:  (366, 3)
The shape of tab3 before merge:  (366, 3)
The shape of tab3 after merge:  (331, 6)
Out of the 366 partners that disbursed loans, KIVA had the contact details of 90.0% of them.
</pre></div>
</div>
</div>
</div>
<p>The partners that received the most funding by KIVA were:</p>
<div class="cell tag_hide-input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># to have more details of the partners that received the most funding by KIVA,</span>
<span class="c1"># sort the results in descending order</span>
<span class="n">tab3</span> <span class="o">=</span> <span class="n">tab3</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;sum_of_funded_amount&#39;</span><span class="p">],</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

<span class="c1"># drop the unecessary columns</span>
<span class="n">tab3</span> <span class="o">=</span> <span class="n">tab3</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="s1">&#39;count_of_amount&#39;</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>

<span class="c1"># display top 10 results; do they match with the original tab3? They match!</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>

<span class="n">ax</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">tab3</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">10</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span> <span class="p">(</span><span class="n">tab3</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">10</span><span class="p">,</span><span class="mi">1</span><span class="p">]</span><span class="o">/</span><span class="mi">1000000</span><span class="p">),</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;#7e81c4&#39;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Kiva donor overall contribution (in million USD)&#39;</span><span class="p">)</span>

<span class="n">ax</span><span class="o">.</span><span class="n">set_xticklabels</span><span class="p">(</span><span class="n">labels</span><span class="o">=</span><span class="n">tab3</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">10</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span> <span class="n">rotation</span> <span class="o">=</span> <span class="p">(</span><span class="mi">90</span><span class="p">),</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">10</span><span class="p">,</span> <span class="n">va</span><span class="o">=</span><span class="s1">&#39;top&#39;</span><span class="p">,</span> <span class="n">ha</span><span class="o">=</span><span class="s1">&#39;left&#39;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Field partners&#39;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;FIELD PARTNERS THAT RECEIVED THE MOST FUNDING ON KIVA&#39;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/kiva_36_0.png" src="_images/kiva_36_0.png" />
</div>
</div>
<p>The partners that serviced the highest number of loans on KIVA were:</p>
<div class="cell tag_hide-input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># sort the results in descending order</span>
<span class="n">tab3</span> <span class="o">=</span> <span class="n">tab3</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;number_of_loans&#39;</span><span class="p">],</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

<span class="c1"># display top 10 results in terms of number of loans</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>

<span class="n">ax</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">tab3</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">10</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span> <span class="n">tab3</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">10</span><span class="p">,</span><span class="mi">2</span><span class="p">],</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;#7e81c4&#39;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Total number of loans on Kiva&#39;</span><span class="p">)</span>

<span class="n">ax</span><span class="o">.</span><span class="n">set_xticklabels</span><span class="p">(</span><span class="n">labels</span><span class="o">=</span><span class="n">tab3</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">10</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span> <span class="n">rotation</span> <span class="o">=</span> <span class="p">(</span><span class="mi">90</span><span class="p">),</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">10</span><span class="p">,</span> <span class="n">va</span><span class="o">=</span><span class="s1">&#39;top&#39;</span><span class="p">,</span> <span class="n">ha</span><span class="o">=</span><span class="s1">&#39;left&#39;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Top 10 Field partners&#39;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;FIELD PARTNERS THAT SERVICED THE HIGHEST LOANS ON KIVA&#39;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/kiva_38_0.png" src="_images/kiva_38_0.png" />
</div>
</div>
<div class="cell tag_hide-input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># add a calculated column to the newly merged tab3</span>
<span class="n">tab3</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="s1">&#39;contribution_per_loan&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">tab3</span><span class="p">[</span><span class="s1">&#39;sum_of_funded_amount&#39;</span><span class="p">]</span><span class="o">/</span><span class="n">tab3</span><span class="p">[</span><span class="s1">&#39;number_of_loans&#39;</span><span class="p">]</span>

<span class="c1"># sort the results in descending order</span>
<span class="n">tab3</span> <span class="o">=</span> <span class="n">tab3</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;contribution_per_loan&#39;</span><span class="p">],</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

<span class="c1"># display top 20 results in terms of donor contribution per loan</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>

<span class="n">ax</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">tab3</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">20</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span> <span class="n">tab3</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">20</span><span class="p">,</span><span class="mi">5</span><span class="p">],</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;#7e81c4&#39;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Kiva donor contribution per loan&#39;</span><span class="p">)</span>

<span class="n">ax</span><span class="o">.</span><span class="n">set_xticklabels</span><span class="p">(</span><span class="n">labels</span><span class="o">=</span><span class="n">tab3</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">20</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span> <span class="n">rotation</span> <span class="o">=</span> <span class="p">(</span><span class="mi">90</span><span class="p">),</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">10</span><span class="p">,</span> <span class="n">va</span><span class="o">=</span><span class="s1">&#39;top&#39;</span><span class="p">,</span> <span class="n">ha</span><span class="o">=</span><span class="s1">&#39;left&#39;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Top 20 Field partners&#39;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;FIELD PARTNERS THAT RECEIVED THE MOST VALUABLE LOANS ON KIVA&#39;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/kiva_39_0.png" src="_images/kiva_39_0.png" />
</div>
</div>
<p>The per capita contribution shows most of the largest contributions per loan actually went directly to social impact businesses.</p>
<br>
<br>
</div>
<div class="section" id="the-characteristics-of-kiva-borrowers">
<h4>The characteristics of KIVA borrowers<a class="headerlink" href="#the-characteristics-of-kiva-borrowers" title="Permalink to this headline">Â¶</a></h4>
<p>In this section, we seek to understand KIVA borrower characteristics.</p>
<br>
<p><em><strong>1. What is the size of the shortfall for each individual borrower in a given sector?</strong></em></p>
<div class="cell tag_hide-input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># create a pivot-table</span>
<span class="n">tab6</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">pivot_table</span><span class="p">(</span><span class="n">loan_data_copy</span><span class="p">,</span> <span class="n">values</span><span class="o">=</span><span class="s1">&#39;funded_amount&#39;</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;sector&#39;</span><span class="p">],</span> <span class="n">aggfunc</span><span class="o">=</span><span class="s1">&#39;sum&#39;</span><span class="p">)</span>

<span class="c1"># sort the results in descending order</span>
<span class="n">tab6</span> <span class="o">=</span> <span class="n">tab6</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;funded_amount&#39;</span><span class="p">],</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

<span class="c1"># rename the aggregated column to an appropiate label</span>
<span class="n">tab6</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;sum_of_funded_amount&#39;</span><span class="p">]</span>

<span class="c1"># make some index entries into columns</span>
<span class="n">tab6</span> <span class="o">=</span> <span class="n">tab6</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;sector&#39;</span><span class="p">])</span>
</pre></div>
</div>
</div>
</div>
<div class="cell tag_hide-input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># create another pivot-table</span>
<span class="n">loans_by_sector</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">pivot_table</span><span class="p">(</span><span class="n">loan_data_copy</span><span class="p">,</span> <span class="n">values</span><span class="o">=</span><span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;sector&#39;</span><span class="p">],</span> <span class="n">aggfunc</span><span class="o">=</span><span class="s1">&#39;count&#39;</span><span class="p">)</span>

<span class="c1"># sort the results in descending order</span>
<span class="n">loans_by_sector</span> <span class="o">=</span> <span class="n">loans_by_sector</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">],</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

<span class="c1"># rename the aggregated column to an appropiate label</span>
<span class="n">loans_by_sector</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;number_of_loans&#39;</span><span class="p">]</span>

<span class="c1"># make some index entries into columns</span>
<span class="n">loans_by_sector</span> <span class="o">=</span> <span class="n">loans_by_sector</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;sector&#39;</span><span class="p">])</span>
</pre></div>
</div>
</div>
</div>
<div class="cell tag_hide-input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># create a third pivot-table</span>
<span class="n">loan_amounts_by_sector</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">pivot_table</span><span class="p">(</span><span class="n">loan_data_copy</span><span class="p">,</span> <span class="n">values</span><span class="o">=</span><span class="s1">&#39;loan_amount&#39;</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;sector&#39;</span><span class="p">],</span> <span class="n">aggfunc</span><span class="o">=</span><span class="s1">&#39;sum&#39;</span><span class="p">)</span>

<span class="c1"># sort the results in descending order</span>
<span class="n">loan_amounts_by_sector</span> <span class="o">=</span> <span class="n">loan_amounts_by_sector</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;loan_amount&#39;</span><span class="p">],</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

<span class="c1"># rename the aggregated column to an appropiate label</span>
<span class="n">loan_amounts_by_sector</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;sum_of_loan_amount&#39;</span><span class="p">]</span>

<span class="c1"># make some index entries into columns</span>
<span class="n">loan_amounts_by_sector</span> <span class="o">=</span> <span class="n">loan_amounts_by_sector</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;sector&#39;</span><span class="p">])</span>
</pre></div>
</div>
</div>
</div>
<div class="cell tag_hide-cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># initial status message</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;The shape of tab6 before merge: &#39;</span><span class="p">,</span> <span class="n">tab6</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>

<span class="c1"># join the data, keeping only relevant entries</span>
<span class="n">tab6</span> <span class="o">=</span> <span class="n">tab6</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">loans_by_sector</span><span class="p">,</span> <span class="n">on</span><span class="o">=</span><span class="s1">&#39;sector&#39;</span><span class="p">)</span>

<span class="c1"># final status message</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;The shape of tab6 after merge: &#39;</span><span class="p">,</span> <span class="n">tab6</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>


<span class="c1"># initial status message</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;The shape of tab6 before merge: &#39;</span><span class="p">,</span> <span class="n">tab6</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>

<span class="c1"># join the data, keeping only relevant entries</span>
<span class="n">tab6</span> <span class="o">=</span> <span class="n">tab6</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">loan_amounts_by_sector</span><span class="p">,</span> <span class="n">on</span><span class="o">=</span><span class="s1">&#39;sector&#39;</span><span class="p">)</span>

<span class="c1"># final status message</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;The shape of tab6 after merge: &#39;</span><span class="p">,</span> <span class="n">tab6</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>The shape of tab6 before merge:  (15, 2)
The shape of tab6 after merge:  (15, 3)
The shape of tab6 before merge:  (15, 3)
The shape of tab6 after merge:  (15, 4)
</pre></div>
</div>
</div>
</div>
<div class="cell tag_hide-input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># assess additional metrics</span>
<span class="n">tab6</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="s1">&#39;donor_contribution_per_loan&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">tab6</span><span class="p">[</span><span class="s1">&#39;sum_of_funded_amount&#39;</span><span class="p">]</span><span class="o">/</span><span class="n">tab6</span><span class="p">[</span><span class="s1">&#39;number_of_loans&#39;</span><span class="p">]</span>
<span class="n">tab6</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="s1">&#39;funding_gap_per_loan&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="o">-</span><span class="n">tab6</span><span class="p">[</span><span class="s1">&#39;sum_of_loan_amount&#39;</span><span class="p">]</span><span class="o">+</span><span class="n">tab6</span><span class="p">[</span><span class="s1">&#39;sum_of_funded_amount&#39;</span><span class="p">])</span><span class="o">/</span><span class="n">tab6</span><span class="p">[</span><span class="s1">&#39;number_of_loans&#39;</span><span class="p">]</span>

<span class="c1"># sort the results in descending order</span>
<span class="n">tab6</span> <span class="o">=</span> <span class="n">tab6</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;donor_contribution_per_loan&#39;</span><span class="p">],</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

<span class="c1"># display all results</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>

<span class="n">ax</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">tab6</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span><span class="mi">0</span><span class="p">],</span> <span class="n">tab6</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span><span class="mi">4</span><span class="p">],</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;#7e81c4&#39;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Kiva donor contribution per loan&#39;</span><span class="p">)</span>

<span class="n">ax</span><span class="o">.</span><span class="n">set_xticklabels</span><span class="p">(</span><span class="n">labels</span><span class="o">=</span><span class="n">tab6</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span><span class="mi">0</span><span class="p">],</span> <span class="n">rotation</span> <span class="o">=</span> <span class="p">(</span><span class="mi">90</span><span class="p">),</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">10</span><span class="p">,</span> <span class="n">va</span><span class="o">=</span><span class="s1">&#39;top&#39;</span><span class="p">,</span> <span class="n">ha</span><span class="o">=</span><span class="s1">&#39;left&#39;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Sectors&#39;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;SECTORS THAT RECEIVED THE MOST VALUABLE LOANS ON KIVA&#39;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/kiva_45_0.png" src="_images/kiva_45_0.png" />
</div>
</div>
<div class="cell tag_hide-input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># sort the results in descending order</span>
<span class="n">tab6</span> <span class="o">=</span> <span class="n">tab6</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;funding_gap_per_loan&#39;</span><span class="p">],</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

<span class="c1"># display all results</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>

<span class="n">ax</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">tab6</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span><span class="mi">0</span><span class="p">],</span> <span class="n">tab6</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span><span class="mi">5</span><span class="p">],</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;crimson&#39;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Funding gap per loan&#39;</span><span class="p">)</span>

<span class="n">ax</span><span class="o">.</span><span class="n">set_xticklabels</span><span class="p">(</span><span class="n">labels</span><span class="o">=</span><span class="n">tab6</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span><span class="mi">0</span><span class="p">],</span> <span class="n">rotation</span> <span class="o">=</span> <span class="p">(</span><span class="mi">90</span><span class="p">),</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">10</span><span class="p">,</span> <span class="n">va</span><span class="o">=</span><span class="s1">&#39;top&#39;</span><span class="p">,</span> <span class="n">ha</span><span class="o">=</span><span class="s1">&#39;left&#39;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Sectors&#39;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;SECTORS THAT HAD THE LARGEST FUNDING GAP ON KIVA&#39;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/kiva_46_0.png" src="_images/kiva_46_0.png" />
</div>
</div>
<p>In as much as Entertainment has the second most valuable loans, it appears that this sector had the highest funding gap. Manufacturing had the lowest funding gap.</p>
<br>
<p><em><strong>2. How were loans and funding distributed across the genders?</strong></em></p>
<div class="cell tag_hide-input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">loan_data_copy</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="s1">&#39;number_of_all_borrowers&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">loan_data_copy</span><span class="p">[</span><span class="s1">&#39;borrower_genders&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="s1">&#39;male&#39;</span><span class="p">)</span> <span class="c1"># counts both instances of female and male - they share the &#39;male&#39; element</span>
<span class="n">loan_data_copy</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="s1">&#39;number_of_female_borrowers&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">loan_data_copy</span><span class="p">[</span><span class="s1">&#39;borrower_genders&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="s1">&#39;female&#39;</span><span class="p">)</span>
<span class="n">loan_data_copy</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="s1">&#39;number_of_male_borrowers&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">loan_data_copy</span><span class="p">[</span><span class="s1">&#39;number_of_all_borrowers&#39;</span><span class="p">]</span> <span class="o">-</span> <span class="n">loan_data_copy</span><span class="p">[</span><span class="s1">&#39;number_of_female_borrowers&#39;</span><span class="p">]</span>


<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;We had borrower data on&#39;</span><span class="p">,</span>
      <span class="nb">round</span><span class="p">(</span><span class="n">loan_data_copy</span><span class="p">[</span><span class="s1">&#39;number_of_all_borrowers&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">count</span><span class="p">()</span><span class="o">/</span><span class="n">loan_data_copy</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">*</span><span class="mi">100</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span>
      <span class="s1">&#39;</span><span class="si">% o</span><span class="s1">f the loans recorded&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>We had borrower data on 99.37 % of the loans recorded
</pre></div>
</div>
</div>
</div>
<p><u><strong>How different genders group together to borrow on Kiva</strong></u></p>
<div class="cell tag_hide-input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># create a pivot-table</span>
<span class="n">borrower_group_data</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">pivot_table</span><span class="p">(</span><span class="n">loan_data_copy</span><span class="p">,</span> <span class="n">values</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;number_of_male_borrowers&#39;</span><span class="p">,</span> <span class="s1">&#39;number_of_female_borrowers&#39;</span><span class="p">],</span>
                                     <span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;number_of_all_borrowers&#39;</span><span class="p">],</span><span class="n">aggfunc</span><span class="o">=</span><span class="s1">&#39;sum&#39;</span><span class="p">)</span>
<span class="c1">#N/B: Using the count gives the total number of loans with borrower data; we need the sum to see the gender distribution across group size</span>

<span class="c1"># make some index entries into columns</span>
<span class="n">borrower_group_data</span> <span class="o">=</span> <span class="n">borrower_group_data</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;number_of_all_borrowers&#39;</span><span class="p">])</span>


<span class="c1"># display the results</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>

<span class="n">ax</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">borrower_group_data</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span><span class="mi">0</span><span class="p">],</span> <span class="n">borrower_group_data</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span><span class="mi">2</span><span class="p">],</span>
       <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Men&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;#7e81c4&#39;</span><span class="p">)</span>

<span class="n">ax</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">borrower_group_data</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span><span class="mi">0</span><span class="p">],</span> <span class="n">borrower_group_data</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span><span class="mi">1</span><span class="p">],</span>
       <span class="n">bottom</span><span class="o">=</span><span class="n">borrower_group_data</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span><span class="mi">2</span><span class="p">],</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Women&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;#cbcce7&#39;</span><span class="p">)</span>

<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Number of borrowers&#39;</span><span class="p">)</span>

<span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;Size of borrower groups&#39;</span><span class="p">)</span>

<span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;GENDER AND SIZE OF BORROWER GROUPS&#39;</span><span class="p">)</span>

<span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>

<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/kiva_50_0.png" src="_images/kiva_50_0.png" />
</div>
</div>
<p>The graph above shows that most people preferred to borrow as individuals; however, there were substantially larger numbers of women in each group size compared to men.</p>
<p><u><strong>Most common nationalities for the different genders</strong></u></p>
<div class="cell tag_hide-input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># create a pivot-table</span>
<span class="n">borrower_country_data</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">pivot_table</span><span class="p">(</span><span class="n">loan_data_copy</span><span class="p">,</span> <span class="n">values</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;number_of_male_borrowers&#39;</span><span class="p">,</span> <span class="s1">&#39;number_of_female_borrowers&#39;</span><span class="p">],</span>
                                       <span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;country&#39;</span><span class="p">],</span><span class="n">aggfunc</span><span class="o">=</span><span class="s1">&#39;sum&#39;</span><span class="p">)</span>


<span class="c1"># sort the male results in descending order</span>
<span class="n">borrower_country_data</span> <span class="o">=</span> <span class="n">borrower_country_data</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;number_of_male_borrowers&#39;</span><span class="p">],</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

<span class="c1"># make some index entries into columns</span>
<span class="n">borrower_country_data</span> <span class="o">=</span> <span class="n">borrower_country_data</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;country&#39;</span><span class="p">])</span>


<span class="c1"># display the results</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>

<span class="n">ax</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">borrower_country_data</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">10</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span> <span class="n">borrower_country_data</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">10</span><span class="p">,</span><span class="mi">2</span><span class="p">],</span>
       <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Men&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;#7e81c4&#39;</span><span class="p">)</span>

<span class="n">ax</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">borrower_country_data</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">10</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span> <span class="n">borrower_country_data</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">10</span><span class="p">,</span><span class="mi">1</span><span class="p">],</span>
       <span class="n">bottom</span><span class="o">=</span><span class="n">borrower_country_data</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">10</span><span class="p">,</span><span class="mi">2</span><span class="p">],</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Women&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;#cbcce7&#39;</span><span class="p">)</span>

<span class="n">ax</span><span class="o">.</span><span class="n">set_xticklabels</span><span class="p">(</span><span class="n">labels</span><span class="o">=</span><span class="n">borrower_country_data</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">10</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span> <span class="n">rotation</span> <span class="o">=</span> <span class="p">(</span><span class="mi">90</span><span class="p">),</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">10</span><span class="p">,</span> <span class="n">va</span><span class="o">=</span><span class="s1">&#39;top&#39;</span><span class="p">,</span> <span class="n">ha</span><span class="o">=</span><span class="s1">&#39;left&#39;</span><span class="p">)</span>

<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Number of borrowers&#39;</span><span class="p">)</span>

<span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;Top 10 countries for men&#39;</span><span class="p">)</span>

<span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;NUMBER OF BORROWERS BY GENDER AND COUNTRY&#39;</span><span class="p">)</span>

<span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>

<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/kiva_52_0.png" src="_images/kiva_52_0.png" />
</div>
</div>
<p>The country with the highest number of male borrowers was Kenya, while the country where men formed the majority of KIVA borrowers was Nigeria.</p>
<div class="cell tag_hide-input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># sort the female results in descending order</span>
<span class="n">borrower_country_data</span> <span class="o">=</span> <span class="n">borrower_country_data</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;number_of_female_borrowers&#39;</span><span class="p">],</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

<span class="c1"># display the results</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>

<span class="n">ax</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">borrower_country_data</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">10</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span> <span class="n">borrower_country_data</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">10</span><span class="p">,</span><span class="mi">2</span><span class="p">],</span>
       <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Men&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;#7e81c4&#39;</span><span class="p">)</span>

<span class="n">ax</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">borrower_country_data</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">10</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span> <span class="n">borrower_country_data</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">10</span><span class="p">,</span><span class="mi">1</span><span class="p">],</span>
       <span class="n">bottom</span><span class="o">=</span><span class="n">borrower_country_data</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">10</span><span class="p">,</span><span class="mi">2</span><span class="p">],</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Women&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;#cbcce7&#39;</span><span class="p">)</span>

<span class="n">ax</span><span class="o">.</span><span class="n">set_xticklabels</span><span class="p">(</span><span class="n">labels</span><span class="o">=</span><span class="n">borrower_country_data</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">10</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span> <span class="n">rotation</span> <span class="o">=</span> <span class="p">(</span><span class="mi">90</span><span class="p">),</span>
                   <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">10</span><span class="p">,</span> <span class="n">va</span><span class="o">=</span><span class="s1">&#39;top&#39;</span><span class="p">,</span> <span class="n">ha</span><span class="o">=</span><span class="s1">&#39;left&#39;</span><span class="p">)</span>

<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Number of borrowers&#39;</span><span class="p">)</span>

<span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;Top 10 countries for women&#39;</span><span class="p">)</span>

<span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;NUMBER OF BORROWERS BY GENDER AND COUNTRY&#39;</span><span class="p">)</span>

<span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>

<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/kiva_54_0.png" src="_images/kiva_54_0.png" />
</div>
</div>
<p>The country with the highest number of female borrowers was the Philippines, it can also be observed that nearly all borrowers were women in Paraguay and Senegal, while India appears to consist of only female borrowers.</p>
<div class="cell tag_hide-input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># create a pivot-table</span>
<span class="n">tab7</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">pivot_table</span><span class="p">(</span><span class="n">loan_data_copy</span><span class="p">,</span> <span class="n">values</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;term_in_months&#39;</span><span class="p">,</span> <span class="s1">&#39;number_of_all_borrowers&#39;</span><span class="p">,</span> <span class="s1">&#39;number_of_male_borrowers&#39;</span><span class="p">,</span> <span class="s1">&#39;number_of_female_borrowers&#39;</span><span class="p">,</span> <span class="s1">&#39;loan_amount&#39;</span><span class="p">,</span> <span class="s1">&#39;funded_amount&#39;</span><span class="p">],</span> <span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;repayment_interval&#39;</span><span class="p">],</span> <span class="n">aggfunc</span><span class="o">=</span><span class="s1">&#39;sum&#39;</span><span class="p">)</span>

<span class="c1"># sort the results in descending order</span>
<span class="n">tab7</span> <span class="o">=</span> <span class="n">tab7</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;number_of_all_borrowers&#39;</span><span class="p">],</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

<span class="c1"># make some index entries into columns</span>
<span class="n">tab7</span> <span class="o">=</span> <span class="n">tab7</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;repayment_interval&#39;</span><span class="p">])</span>
</pre></div>
</div>
</div>
</div>
<div class="cell tag_hide-input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># create another pivot-table</span>
<span class="n">loan_repayment</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">pivot_table</span><span class="p">(</span><span class="n">loan_data_copy</span><span class="p">,</span> <span class="n">values</span><span class="o">=</span><span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;repayment_interval&#39;</span><span class="p">],</span> <span class="n">aggfunc</span><span class="o">=</span><span class="s1">&#39;count&#39;</span><span class="p">)</span>

<span class="c1"># sort the results in descending order</span>
<span class="n">loan_repayment</span> <span class="o">=</span> <span class="n">loan_repayment</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">],</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

<span class="c1"># rename the aggregated column to an appropiate label</span>
<span class="n">loan_repayment</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;number_of_loans&#39;</span><span class="p">]</span>

<span class="c1"># make some index entries into columns</span>
<span class="n">loan_repayment</span> <span class="o">=</span> <span class="n">loan_repayment</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;repayment_interval&#39;</span><span class="p">])</span>
</pre></div>
</div>
</div>
</div>
<div class="cell tag_hide-cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># initial status message</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;The shape of tab7 before merge: &#39;</span><span class="p">,</span> <span class="n">tab7</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>

<span class="c1"># join the data, keeping only relevant entries</span>
<span class="n">tab7</span> <span class="o">=</span> <span class="n">tab7</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">loan_repayment</span><span class="p">,</span> <span class="n">on</span><span class="o">=</span><span class="s1">&#39;repayment_interval&#39;</span><span class="p">)</span>

<span class="c1"># final status message</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;The shape of tab7 after merge: &#39;</span><span class="p">,</span> <span class="n">tab7</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>The shape of tab7 before merge:  (4, 7)
The shape of tab7 after merge:  (4, 8)
</pre></div>
</div>
</div>
</div>
<div class="cell tag_hide-input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Present findings in more digestible formats by:</span>

<span class="c1"># 1. Converting total borrowers to male and female proportions</span>
<span class="n">tab7</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="s1">&#39;female_pct_of_total_borrowers&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">round</span><span class="p">((</span><span class="n">tab7</span><span class="p">[</span><span class="s1">&#39;number_of_female_borrowers&#39;</span><span class="p">]</span><span class="o">/</span><span class="n">tab7</span><span class="p">[</span><span class="s1">&#39;number_of_all_borrowers&#39;</span><span class="p">])</span><span class="o">*</span><span class="mi">100</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="n">tab7</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="s1">&#39;male_pct_of_total_borrowers&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">round</span><span class="p">((</span><span class="n">tab7</span><span class="p">[</span><span class="s1">&#39;number_of_male_borrowers&#39;</span><span class="p">]</span><span class="o">/</span><span class="n">tab7</span><span class="p">[</span><span class="s1">&#39;number_of_all_borrowers&#39;</span><span class="p">])</span><span class="o">*</span><span class="mi">100</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>

<span class="c1"># 2. Extracting funding amounts based on gender</span>
<span class="n">tab7</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="s1">&#39;million_USD_female_total_funding&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">round</span><span class="p">((</span><span class="n">tab7</span><span class="p">[</span><span class="s1">&#39;female_pct_of_total_borrowers&#39;</span><span class="p">]</span><span class="o">/</span><span class="mi">100</span><span class="o">*</span><span class="n">tab7</span><span class="p">[</span><span class="s1">&#39;funded_amount&#39;</span><span class="p">])</span><span class="o">/</span><span class="mi">1000000</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="n">tab7</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="s1">&#39;million_USD_male_total_funding&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">round</span><span class="p">((</span><span class="n">tab7</span><span class="p">[</span><span class="s1">&#39;male_pct_of_total_borrowers&#39;</span><span class="p">]</span><span class="o">/</span><span class="mi">100</span><span class="o">*</span><span class="n">tab7</span><span class="p">[</span><span class="s1">&#39;funded_amount&#39;</span><span class="p">])</span><span class="o">/</span><span class="mi">1000000</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>

<span class="c1"># 3. Extracting loan amounts based on gender</span>
<span class="n">tab7</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="s1">&#39;million_USD_female_total_loan_amount&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">round</span><span class="p">((</span><span class="n">tab7</span><span class="p">[</span><span class="s1">&#39;female_pct_of_total_borrowers&#39;</span><span class="p">]</span><span class="o">/</span><span class="mi">100</span><span class="o">*</span><span class="n">tab7</span><span class="p">[</span><span class="s1">&#39;loan_amount&#39;</span><span class="p">])</span><span class="o">/</span><span class="mi">1000000</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="n">tab7</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="s1">&#39;million_USD_male_total_loan_amount&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">round</span><span class="p">((</span><span class="n">tab7</span><span class="p">[</span><span class="s1">&#39;male_pct_of_total_borrowers&#39;</span><span class="p">]</span><span class="o">/</span><span class="mi">100</span><span class="o">*</span><span class="n">tab7</span><span class="p">[</span><span class="s1">&#39;loan_amount&#39;</span><span class="p">])</span><span class="o">/</span><span class="mi">1000000</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>

<span class="c1"># 4. Extracting funding gaps based on gender</span>
<span class="n">tab7</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="s1">&#39;million_female_funding_gap&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="o">-</span><span class="n">tab7</span><span class="p">[</span><span class="s1">&#39;million_USD_female_total_loan_amount&#39;</span><span class="p">]</span><span class="o">+</span><span class="n">tab7</span><span class="p">[</span><span class="s1">&#39;million_USD_female_total_funding&#39;</span><span class="p">]</span>
<span class="n">tab7</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="s1">&#39;million_male_funding_gap&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="o">-</span><span class="n">tab7</span><span class="p">[</span><span class="s1">&#39;million_USD_male_total_loan_amount&#39;</span><span class="p">]</span><span class="o">+</span><span class="n">tab7</span><span class="p">[</span><span class="s1">&#39;million_USD_male_total_funding&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<div class="cell tag_hide-input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># drop raw data columns</span>
<span class="n">tab7</span> <span class="o">=</span> <span class="n">tab7</span><span class="o">.</span><span class="n">drop</span><span class="p">([</span><span class="s1">&#39;funded_amount&#39;</span><span class="p">,</span> <span class="s1">&#39;loan_amount&#39;</span><span class="p">,</span>
                  <span class="s1">&#39;number_of_all_borrowers&#39;</span><span class="p">,</span> <span class="s1">&#39;number_of_female_borrowers&#39;</span><span class="p">,</span>
                  <span class="s1">&#39;number_of_male_borrowers&#39;</span><span class="p">],</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p><u><strong>Funding received based on gender</strong></u></p>
<div class="cell tag_hide-input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># display summary of funding by gender</span>

<span class="n">status</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Total male funding&#39;</span><span class="p">,</span><span class="s1">&#39;Total female funding&#39;</span><span class="p">]</span>

<span class="n">values</span> <span class="o">=</span> <span class="p">[</span><span class="n">tab7</span><span class="p">[</span><span class="s1">&#39;million_USD_male_total_funding&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">sum</span><span class="p">(),</span> <span class="n">tab7</span><span class="p">[</span><span class="s1">&#39;million_USD_female_total_funding&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">sum</span><span class="p">()]</span>

<span class="n">fig1</span><span class="p">,</span> <span class="n">ax1</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>

<span class="n">ax1</span><span class="o">.</span><span class="n">pie</span><span class="p">(</span><span class="n">values</span><span class="p">,</span> <span class="n">labels</span><span class="o">=</span><span class="n">status</span><span class="p">,</span>
        <span class="n">autopct</span><span class="o">=</span><span class="s1">&#39;</span><span class="si">%1.2f%%</span><span class="s1">&#39;</span><span class="p">,</span>
        <span class="n">startangle</span><span class="o">=</span><span class="mi">90</span><span class="p">,</span>
        <span class="n">colors</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="s1">&#39;#7e81c4&#39;</span><span class="p">,</span><span class="s1">&#39;#cbcce7&#39;</span><span class="p">]))</span>

<span class="n">ax1</span><span class="o">.</span><span class="n">axis</span><span class="p">(</span><span class="s1">&#39;equal&#39;</span><span class="p">)</span>  <span class="c1"># Equal aspect ratio ensures that pie is drawn as a circle.</span>

<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/kiva_62_0.png" src="_images/kiva_62_0.png" />
</div>
</div>
<p><u><strong>Total loan amounts taken by each gender</strong></u></p>
<div class="cell tag_hide-input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># display loan amounts by gender</span>

<span class="n">status</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Total loan taken by men&#39;</span><span class="p">,</span><span class="s1">&#39;Total loan taken by women&#39;</span><span class="p">]</span>

<span class="n">values</span> <span class="o">=</span> <span class="p">[</span><span class="n">tab7</span><span class="p">[</span><span class="s1">&#39;million_USD_male_total_loan_amount&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">sum</span><span class="p">(),</span> <span class="n">tab7</span><span class="p">[</span><span class="s1">&#39;million_USD_female_total_loan_amount&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">sum</span><span class="p">()]</span>

<span class="n">fig1</span><span class="p">,</span> <span class="n">ax1</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>

<span class="n">ax1</span><span class="o">.</span><span class="n">pie</span><span class="p">(</span><span class="n">values</span><span class="p">,</span> <span class="n">labels</span><span class="o">=</span><span class="n">status</span><span class="p">,</span>
        <span class="n">autopct</span><span class="o">=</span><span class="s1">&#39;</span><span class="si">%1.2f%%</span><span class="s1">&#39;</span><span class="p">,</span>
        <span class="n">startangle</span><span class="o">=</span><span class="mi">90</span><span class="p">,</span>
        <span class="n">colors</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="s1">&#39;#7e81c4&#39;</span><span class="p">,</span><span class="s1">&#39;#cbcce7&#39;</span><span class="p">]))</span>

<span class="n">ax1</span><span class="o">.</span><span class="n">axis</span><span class="p">(</span><span class="s1">&#39;equal&#39;</span><span class="p">)</span>  <span class="c1"># Equal aspect ratio ensures that pie is drawn as a circle.</span>

<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/kiva_64_0.png" src="_images/kiva_64_0.png" />
</div>
</div>
<p><u><strong>Loan repayment behaviour based on gender</strong></u></p>
<div class="cell tag_hide-input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Display summary of loan repayment behaviour by gender</span>
<span class="c1"># 1. Men</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>

<span class="n">ax</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">tab7</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span><span class="mi">0</span><span class="p">],</span>
       <span class="p">(</span><span class="n">tab7</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span><span class="mi">1</span><span class="p">]</span><span class="o">/</span><span class="n">tab7</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span><span class="mi">2</span><span class="p">])</span><span class="o">*</span><span class="p">(</span><span class="n">tab7</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span><span class="mi">4</span><span class="p">]</span><span class="o">/</span><span class="mi">100</span><span class="p">),</span>
       <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Men&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;#7e81c4&#39;</span><span class="p">)</span>

<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Loan term per loan&#39;</span><span class="p">)</span>

<span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;Repayment interval&#39;</span><span class="p">)</span>

<span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;LOAN REPAYMENT BEHAVIOUR&#39;</span><span class="p">)</span>

<span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>

<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/kiva_66_0.png" src="_images/kiva_66_0.png" />
</div>
</div>
<div class="cell tag_hide-input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># 2. Women</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>

<span class="n">ax</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">tab7</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span><span class="mi">0</span><span class="p">],</span>
       <span class="p">(</span><span class="n">tab7</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span><span class="mi">1</span><span class="p">]</span><span class="o">/</span><span class="n">tab7</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span><span class="mi">2</span><span class="p">])</span><span class="o">*</span><span class="p">(</span><span class="n">tab7</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span><span class="mi">3</span><span class="p">]</span><span class="o">/</span><span class="mi">100</span><span class="p">),</span>
       <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Women&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;#cbcce7&#39;</span><span class="p">)</span>

<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Loan term per loan&#39;</span><span class="p">)</span>

<span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;Repayment interval&#39;</span><span class="p">)</span>

<span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;LOAN REPAYMENT BEHAVIOUR&#39;</span><span class="p">)</span>

<span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>

<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/kiva_67_0.png" src="_images/kiva_67_0.png" />
</div>
</div>
<p>In as much as most men and women consistently paid off long-term loans on a monthly basis, women had a much larger time horizon to pay off their loans in general.</p>
<p>Additionally, a significant amount of data on repayment behaviour is missing for both genders (missing data is represented as the â€˜bullet groupâ€™).</p>
<p><u><strong>Funding gap in millions faced by each gender</strong></u></p>
<div class="cell tag_hide-input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># display summary of funding gap by gender</span>

<span class="n">status</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Male funding gap&#39;</span><span class="p">,</span><span class="s1">&#39;Female funding gap&#39;</span><span class="p">]</span>

<span class="n">values</span> <span class="o">=</span> <span class="p">[</span><span class="nb">abs</span><span class="p">(</span><span class="n">tab7</span><span class="p">[</span><span class="s1">&#39;million_male_funding_gap&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">sum</span><span class="p">()),</span> <span class="nb">abs</span><span class="p">(</span><span class="n">tab7</span><span class="p">[</span><span class="s1">&#39;million_male_funding_gap&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">sum</span><span class="p">())]</span>

<span class="n">fig1</span><span class="p">,</span> <span class="n">ax1</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>

<span class="n">ax1</span><span class="o">.</span><span class="n">pie</span><span class="p">(</span><span class="n">values</span><span class="p">,</span> <span class="n">labels</span><span class="o">=</span><span class="n">status</span><span class="p">,</span>
        <span class="n">autopct</span><span class="o">=</span><span class="s1">&#39;</span><span class="si">%1.2f%%</span><span class="s1">&#39;</span><span class="p">,</span>
        <span class="n">startangle</span><span class="o">=</span><span class="mi">90</span><span class="p">,</span>
        <span class="n">colors</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="s1">&#39;#7e81c4&#39;</span><span class="p">,</span><span class="s1">&#39;#cbcce7&#39;</span><span class="p">]))</span>

<span class="n">ax1</span><span class="o">.</span><span class="n">axis</span><span class="p">(</span><span class="s1">&#39;equal&#39;</span><span class="p">)</span>  <span class="c1"># Equal aspect ratio ensures that pie is drawn as a circle.</span>

<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;In this instance, both men and women have the same size of funding gap, </span><span class="si">{}</span><span class="s1"> million US dollars</span><span class="se">\n</span><span class="s1">over the time period the data was collected.&#39;</span>
      <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span>
          <span class="nb">abs</span><span class="p">(</span><span class="n">tab7</span><span class="p">[</span><span class="s1">&#39;million_male_funding_gap&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">sum</span><span class="p">()),</span>
          <span class="mi">2</span><span class="p">)</span>
             <span class="p">)</span>
     <span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/kiva_69_0.png" src="_images/kiva_69_0.png" />
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>In this instance, both men and women have the same size of funding gap, 10.19 million US dollars
over the time period the data was collected.
</pre></div>
</div>
</div>
</div>
<div class="cell tag_hide-input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># display summary of the funding gap by gender and monthly repayment behaviour</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>

<span class="n">ax</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">tab7</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span><span class="mi">0</span><span class="p">],</span> <span class="n">tab7</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span><span class="mi">10</span><span class="p">],</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Men&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;black&#39;</span><span class="p">)</span>

<span class="n">ax</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">tab7</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span><span class="mi">0</span><span class="p">],</span> <span class="n">tab7</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span><span class="mi">9</span><span class="p">],</span> <span class="n">bottom</span><span class="o">=</span><span class="n">tab7</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span><span class="mi">10</span><span class="p">],</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Women&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;crimson&#39;</span><span class="p">)</span>

<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Funding gap (millions)&#39;</span><span class="p">)</span>

<span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;Repayment interval&#39;</span><span class="p">)</span>

<span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;SIZE OF FUNDING GAP&#39;</span><span class="p">)</span>

<span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>

<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/kiva_70_0.png" src="_images/kiva_70_0.png" />
</div>
</div>
<p>The graph above indicates that in as much as women are getting much more funding than men, those in the monthly repayment group still have a significant funding gap. Furthermore, the second-largest funding gap was not from those people belonging to the irregular payments group, but those belonging to the group that had missing data on payment behaviour. This makes sense because there may be a lack of trust that makes KIVA donors not foot the entire loan of those with missing repayment plans.</p>
<br>
<br>
</div>
<div class="section" id="global-welfare">
<h4>Global welfare<a class="headerlink" href="#global-welfare" title="Permalink to this headline">Â¶</a></h4>
<p>In this section, we seek to explore the data to understand the financial well-being of various countries with the aid of an external dataset</p>
<p><em><strong>1. What percentage of their monthly expenditure does the average citizen devote to loan repayments?</strong></em></p>
<div class="cell tag_hide-cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Made a copy of the data: </span>
<span class="n">expenditure</span> <span class="o">=</span> <span class="n">PCE_data</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>

<span class="n">regions</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;East Asia and Pacific&#39;</span><span class="p">,</span> <span class="s1">&#39;Europe and Central Asia&#39;</span><span class="p">,</span>
           <span class="s1">&#39;Latin America and the Caribbean&#39;</span><span class="p">,</span> <span class="s1">&#39;Middle East and North Africa&#39;</span><span class="p">,</span>
           <span class="s1">&#39;Other High Income&#39;</span><span class="p">,</span> <span class="s1">&#39;South Asia&#39;</span><span class="p">,</span> <span class="s1">&#39;Sub-Saharan Africa&#39;</span><span class="p">]</span>

<span class="c1"># Reference rows:</span>
<span class="n">row_indices</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">26</span><span class="p">,</span><span class="mi">57</span><span class="p">,</span><span class="mi">89</span><span class="p">,</span><span class="mi">104</span><span class="p">,</span><span class="mi">167</span><span class="p">,</span><span class="mi">176</span><span class="p">]</span>

<span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">row_indices</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">expenditure</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">r</span><span class="p">,</span><span class="mi">0</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>East Asia and Pacific
Europe and Central Asia
Latin America and the Caribbean
Middle East and North Africa
Other high Income
South Asia
Sub-Saharan Africa
</pre></div>
</div>
</div>
</div>
<div class="cell tag_hide-cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">expenditure</span><span class="o">.</span><span class="n">shape</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(225, 54)
</pre></div>
</div>
</div>
</div>
<div class="cell tag_hide-cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Make a regional column for the data</span>
<span class="n">expenditure</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="s1">&#39;region&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>

<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Regional column changes from&#39;</span><span class="p">,</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>

<span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">row_indices</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">expenditure</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">r</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span><span class="mi">54</span><span class="p">])</span>
    
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">to:&#39;</span><span class="p">,</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>

<span class="n">expenditure</span><span class="p">[</span><span class="s1">&#39;region&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">26</span><span class="p">]</span> <span class="o">=</span> <span class="n">regions</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">expenditure</span><span class="p">[</span><span class="s1">&#39;region&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">26</span><span class="p">:</span><span class="mi">57</span><span class="p">]</span> <span class="o">=</span> <span class="n">regions</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
<span class="n">expenditure</span><span class="p">[</span><span class="s1">&#39;region&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">57</span><span class="p">:</span><span class="mi">89</span><span class="p">]</span> <span class="o">=</span> <span class="n">regions</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
<span class="n">expenditure</span><span class="p">[</span><span class="s1">&#39;region&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">89</span><span class="o">-</span><span class="mi">1</span><span class="p">:</span><span class="mi">104</span><span class="p">]</span> <span class="o">=</span> <span class="n">regions</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
<span class="n">expenditure</span><span class="p">[</span><span class="s1">&#39;region&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">104</span><span class="o">-</span><span class="mi">1</span><span class="p">:</span><span class="mi">167</span><span class="p">]</span> <span class="o">=</span> <span class="n">regions</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span>
<span class="n">expenditure</span><span class="p">[</span><span class="s1">&#39;region&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">167</span><span class="o">-</span><span class="mi">1</span><span class="p">:</span><span class="mi">176</span><span class="p">]</span> <span class="o">=</span> <span class="n">regions</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span>
<span class="n">expenditure</span><span class="p">[</span><span class="s1">&#39;region&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">176</span><span class="p">:</span><span class="mi">225</span><span class="p">]</span> <span class="o">=</span> <span class="n">regions</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span>

<span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">row_indices</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">expenditure</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">r</span><span class="p">,</span><span class="mi">54</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Regional column changes from 

0
0
0
0
0
0
0

to: 

East Asia and Pacific
Europe and Central Asia
Latin America and the Caribbean
Middle East and North Africa
Other High Income
South Asia
Sub-Saharan Africa
</pre></div>
</div>
</div>
</div>
<div class="cell tag_hide-cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;From:&#39;</span><span class="p">,</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>

<span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">row_indices</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{}</span><span class="s1"> is in </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">expenditure</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">r</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span><span class="n">expenditure</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">r</span><span class="p">,</span><span class="mi">54</span><span class="p">]))</span>

<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">,</span> <span class="s1">&#39;to:&#39;</span><span class="p">,</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>

<span class="c1"># Delete header rows</span>
<span class="n">expenditure</span> <span class="o">=</span> <span class="n">expenditure</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">labels</span><span class="o">=</span><span class="n">row_indices</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

<span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">row_indices</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{}</span><span class="s1"> is in </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">expenditure</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">r</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span><span class="n">expenditure</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">r</span><span class="p">,</span><span class="mi">54</span><span class="p">]))</span>
    
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">,</span><span class="s1">&#39;Expenditure new shape:&#39;</span><span class="p">,</span><span class="n">expenditure</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>From: 

East Asia and Pacific is in East Asia and Pacific
Europe and Central Asia is in Europe and Central Asia
Latin America and the Caribbean is in Latin America and the Caribbean
Middle East and North Africa is in Middle East and North Africa
Other high Income is in Other High Income
South Asia is in South Asia
Sub-Saharan Africa is in Sub-Saharan Africa

 to: 

American Samoa is in East Asia and Pacific
Armenia is in Europe and Central Asia
Belize is in Latin America and the Caribbean
Iran, Islamic Republic of is in Middle East and North Africa
Austria is in Other High Income
Nepal is in South Asia
Cameroon is in Sub-Saharan Africa

 Expenditure new shape: (218, 55)
</pre></div>
</div>
</div>
</div>
<div class="cell tag_hide-cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Convert any &#39;n/a&#39; strings to NaN values</span>
<span class="n">expenditure</span> <span class="o">=</span> <span class="n">expenditure</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;n/a&#39;</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">)</span>

<span class="c1"># Convert any numeric data stored as a string into a decimal</span>
<span class="nb">print</span><span class="p">(</span><span class="n">expenditure</span><span class="o">.</span><span class="n">dtypes</span><span class="p">)</span>

<span class="n">cols</span> <span class="o">=</span> <span class="n">expenditure</span><span class="o">.</span><span class="n">columns</span><span class="p">[</span><span class="mi">16</span><span class="p">:</span><span class="mi">54</span><span class="p">]</span>

<span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">cols</span><span class="p">:</span>
    <span class="n">expenditure</span><span class="p">[</span><span class="n">col</span><span class="p">]</span> <span class="o">=</span> <span class="n">expenditure</span><span class="p">[</span><span class="n">col</span><span class="p">]</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">)</span>

<span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">cols</span><span class="p">:</span>
    <span class="n">expenditure</span><span class="p">[</span><span class="n">col</span><span class="p">]</span> <span class="o">=</span> <span class="n">expenditure</span><span class="p">[</span><span class="n">col</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="s1">&#39;float64&#39;</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">,</span><span class="n">expenditure</span><span class="o">.</span><span class="n">dtypes</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Country     object
1967       float64
1968       float64
1969       float64
1970       float64
1971       float64
1972       float64
1973       float64
1974       float64
1975       float64
1976       float64
1977       float64
1978       float64
1979       float64
1980       float64
1981       float64
1982        object
1983        object
1984        object
1985        object
1986        object
1987        object
1988        object
1989        object
1990        object
1991        object
1992        object
1993        object
1994        object
1995        object
1996        object
1997        object
1998        object
1999        object
2000        object
2001        object
2002        object
2003        object
2004        object
2005        object
2006        object
2007        object
2008        object
2009        object
2010        object
2011        object
2012        object
2013        object
2014        object
2015        object
2016        object
2017        object
2018        object
2019        object
region      object
dtype: object

 Country     object
1967       float64
1968       float64
1969       float64
1970       float64
1971       float64
1972       float64
1973       float64
1974       float64
1975       float64
1976       float64
1977       float64
1978       float64
1979       float64
1980       float64
1981       float64
1982       float64
1983       float64
1984       float64
1985       float64
1986       float64
1987       float64
1988       float64
1989       float64
1990       float64
1991       float64
1992       float64
1993       float64
1994       float64
1995       float64
1996       float64
1997       float64
1998       float64
1999       float64
2000       float64
2001       float64
2002       float64
2003       float64
2004       float64
2005       float64
2006       float64
2007       float64
2008       float64
2009       float64
2010       float64
2011       float64
2012       float64
2013       float64
2014       float64
2015       float64
2016       float64
2017       float64
2018       float64
2019       float64
region      object
dtype: object
</pre></div>
</div>
</div>
</div>
<div class="cell tag_hide-cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">YearlyExpenditure</span> <span class="o">=</span> <span class="n">expenditure</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span><span class="s1">&#39;2014&#39;</span><span class="p">:</span><span class="s1">&#39;2017&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>

<span class="n">MonthlyExpenditure</span> <span class="o">=</span> <span class="n">YearlyExpenditure</span><span class="o">/</span><span class="mi">12</span>

<span class="n">MonthlyExpenditure</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span><span class="s1">&#39;country&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">expenditure</span><span class="p">[</span><span class="s1">&#39;Country&#39;</span><span class="p">]</span>

<span class="n">MonthlyExpenditure</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span><span class="s1">&#39;region&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">expenditure</span><span class="p">[</span><span class="s1">&#39;region&#39;</span><span class="p">]</span>

<span class="n">MonthlyExpenditure</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>2014</th>
      <th>2015</th>
      <th>2016</th>
      <th>2017</th>
      <th>country</th>
      <th>region</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>1</th>
      <td>0.005000</td>
      <td>0.005000</td>
      <td>0.005000</td>
      <td>0.005000</td>
      <td>American Samoa</td>
      <td>East Asia and Pacific</td>
    </tr>
    <tr>
      <th>2</th>
      <td>1.272500</td>
      <td>1.293333</td>
      <td>1.314167</td>
      <td>1.334167</td>
      <td>Cambodia</td>
      <td>East Asia and Pacific</td>
    </tr>
    <tr>
      <th>3</th>
      <td>113.689167</td>
      <td>114.268333</td>
      <td>114.889167</td>
      <td>115.533333</td>
      <td>China</td>
      <td>East Asia and Pacific</td>
    </tr>
    <tr>
      <th>4</th>
      <td>0.072500</td>
      <td>0.072500</td>
      <td>0.072500</td>
      <td>0.073333</td>
      <td>Fiji</td>
      <td>East Asia and Pacific</td>
    </tr>
    <tr>
      <th>5</th>
      <td>21.260833</td>
      <td>21.531667</td>
      <td>21.795833</td>
      <td>22.054167</td>
      <td>Indonesia</td>
      <td>East Asia and Pacific</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>220</th>
      <td>4.163333</td>
      <td>4.290000</td>
      <td>4.420833</td>
      <td>4.555000</td>
      <td>Tanzania</td>
      <td>Sub-Saharan Africa</td>
    </tr>
    <tr>
      <th>221</th>
      <td>0.595000</td>
      <td>0.610000</td>
      <td>0.625833</td>
      <td>0.641667</td>
      <td>Togo</td>
      <td>Sub-Saharan Africa</td>
    </tr>
    <tr>
      <th>222</th>
      <td>3.075833</td>
      <td>3.185833</td>
      <td>3.304167</td>
      <td>3.430000</td>
      <td>Uganda</td>
      <td>Sub-Saharan Africa</td>
    </tr>
    <tr>
      <th>223</th>
      <td>1.283333</td>
      <td>1.323333</td>
      <td>1.363333</td>
      <td>1.404167</td>
      <td>Zambia</td>
      <td>Sub-Saharan Africa</td>
    </tr>
    <tr>
      <th>224</th>
      <td>1.132500</td>
      <td>1.150833</td>
      <td>1.169167</td>
      <td>1.186667</td>
      <td>Zimbabwe</td>
      <td>Sub-Saharan Africa</td>
    </tr>
  </tbody>
</table>
<p>218 rows Ã— 6 columns</p>
</div></div></div>
</div>
<div class="cell tag_hide-cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># get the monthly repayment on each loan</span>
<span class="n">loan_data_copy</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="s1">&#39;monthly_loan_repayment&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">loan_data_copy</span><span class="p">[</span><span class="s1">&#39;loan_amount&#39;</span><span class="p">]</span><span class="o">/</span><span class="n">loan_data_copy</span><span class="p">[</span><span class="s1">&#39;term_in_months&#39;</span><span class="p">]</span>

<span class="c1"># get the year that the loan was issued</span>
<span class="n">loan_data_copy</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span><span class="s1">&#39;disbursement_year&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">loan_data</span><span class="p">[</span><span class="s1">&#39;disbursed_time&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">dt</span><span class="o">.</span><span class="n">year</span>

<span class="c1"># create a pivot-table</span>
<span class="n">tab8</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">pivot_table</span><span class="p">(</span><span class="n">loan_data_copy</span><span class="p">,</span> <span class="n">values</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;monthly_loan_repayment&#39;</span><span class="p">],</span> <span class="n">columns</span><span class="o">=</span><span class="s1">&#39;disbursement_year&#39;</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;country&#39;</span><span class="p">],</span> <span class="n">aggfunc</span><span class="o">=</span><span class="s1">&#39;mean&#39;</span><span class="p">)</span>

<span class="c1"># drop level and rename columns</span>
<span class="n">tab8</span> <span class="o">=</span> <span class="n">tab8</span><span class="o">.</span><span class="n">droplevel</span><span class="p">(</span><span class="s1">&#39;disbursement_year&#39;</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">tab8</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;monthly_loan_repayment 2013&#39;</span><span class="p">,</span> <span class="s1">&#39;monthly_loan_repayment 2014&#39;</span><span class="p">,</span>
                <span class="s1">&#39;monthly_loan_repayment 2015&#39;</span><span class="p">,</span> <span class="s1">&#39;monthly_loan_repayment 2016&#39;</span><span class="p">,</span>
                <span class="s1">&#39;monthly_loan_repayment 2017&#39;</span><span class="p">]</span>

<span class="c1"># make some index entries into columns</span>
<span class="n">tab8</span> <span class="o">=</span> <span class="n">tab8</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;country&#39;</span><span class="p">])</span>

<span class="c1"># and display all results</span>
<span class="n">tab8</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>country</th>
      <th>monthly_loan_repayment 2013</th>
      <th>monthly_loan_repayment 2014</th>
      <th>monthly_loan_repayment 2015</th>
      <th>monthly_loan_repayment 2016</th>
      <th>monthly_loan_repayment 2017</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Afghanistan</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>750.000000</td>
      <td>1333.333333</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Albania</td>
      <td>62.227835</td>
      <td>64.557728</td>
      <td>54.131447</td>
      <td>55.527071</td>
      <td>61.604227</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Armenia</td>
      <td>64.103653</td>
      <td>64.558263</td>
      <td>51.850628</td>
      <td>49.406712</td>
      <td>50.580462</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Azerbaijan</td>
      <td>105.071779</td>
      <td>108.725509</td>
      <td>82.548595</td>
      <td>59.692751</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>4</th>
      <td>Belize</td>
      <td>NaN</td>
      <td>18.405275</td>
      <td>NaN</td>
      <td>22.880435</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>80</th>
      <td>Vanuatu</td>
      <td>NaN</td>
      <td>62.500000</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>81</th>
      <td>Vietnam</td>
      <td>68.839701</td>
      <td>91.272779</td>
      <td>97.516549</td>
      <td>90.730029</td>
      <td>69.997056</td>
    </tr>
    <tr>
      <th>82</th>
      <td>Yemen</td>
      <td>62.567830</td>
      <td>57.303204</td>
      <td>60.290609</td>
      <td>43.056244</td>
      <td>42.720586</td>
    </tr>
    <tr>
      <th>83</th>
      <td>Zambia</td>
      <td>NaN</td>
      <td>81.800068</td>
      <td>93.311061</td>
      <td>107.013918</td>
      <td>74.278048</td>
    </tr>
    <tr>
      <th>84</th>
      <td>Zimbabwe</td>
      <td>175.857143</td>
      <td>74.398992</td>
      <td>126.842706</td>
      <td>110.083632</td>
      <td>125.510372</td>
    </tr>
  </tbody>
</table>
<p>85 rows Ã— 6 columns</p>
</div></div></div>
</div>
<div class="cell tag_hide-cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># compare country/territory labels in the 2 datasets</span>
<span class="nb">print</span><span class="p">(</span><span class="n">tab8</span><span class="p">[</span><span class="s1">&#39;country&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">unique</span><span class="p">())</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">MonthlyExpenditure</span><span class="p">[</span><span class="s1">&#39;country&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">unique</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[&#39;Afghanistan&#39; &#39;Albania&#39; &#39;Armenia&#39; &#39;Azerbaijan&#39; &#39;Belize&#39; &#39;Benin&#39; &#39;Bhutan&#39;
 &#39;Bolivia&#39; &#39;Brazil&#39; &#39;Burkina Faso&#39; &#39;Burundi&#39; &#39;Cambodia&#39; &#39;Cameroon&#39; &#39;Chile&#39;
 &#39;China&#39; &#39;Colombia&#39; &#39;Congo&#39; &#39;Costa Rica&#39; &quot;Cote D&#39;Ivoire&quot;
 &#39;Dominican Republic&#39; &#39;Ecuador&#39; &#39;Egypt&#39; &#39;El Salvador&#39; &#39;Georgia&#39; &#39;Ghana&#39;
 &#39;Guatemala&#39; &#39;Haiti&#39; &#39;Honduras&#39; &#39;India&#39; &#39;Indonesia&#39; &#39;Iraq&#39; &#39;Israel&#39;
 &#39;Jordan&#39; &#39;Kenya&#39; &#39;Kosovo&#39; &#39;Kyrgyzstan&#39; &quot;Lao People&#39;s Democratic Republic&quot;
 &#39;Lebanon&#39; &#39;Lesotho&#39; &#39;Liberia&#39; &#39;Madagascar&#39; &#39;Malawi&#39; &#39;Mali&#39; &#39;Mauritania&#39;
 &#39;Mexico&#39; &#39;Moldova&#39; &#39;Mongolia&#39; &#39;Mozambique&#39; &#39;Myanmar (Burma)&#39; &#39;Namibia&#39;
 &#39;Nepal&#39; &#39;Nicaragua&#39; &#39;Nigeria&#39; &#39;Pakistan&#39; &#39;Palestine&#39; &#39;Panama&#39; &#39;Paraguay&#39;
 &#39;Peru&#39; &#39;Philippines&#39; &#39;Puerto Rico&#39; &#39;Rwanda&#39;
 &#39;Saint Vincent and the Grenadines&#39; &#39;Samoa&#39; &#39;Senegal&#39; &#39;Sierra Leone&#39;
 &#39;Solomon Islands&#39; &#39;Somalia&#39; &#39;South Africa&#39; &#39;South Sudan&#39; &#39;Suriname&#39;
 &#39;Tajikistan&#39; &#39;Tanzania&#39; &#39;Thailand&#39; &#39;The Democratic Republic of the Congo&#39;
 &#39;Timor-Leste&#39; &#39;Togo&#39; &#39;Turkey&#39; &#39;Uganda&#39; &#39;Ukraine&#39; &#39;United States&#39;
 &#39;Vanuatu&#39; &#39;Vietnam&#39; &#39;Yemen&#39; &#39;Zambia&#39; &#39;Zimbabwe&#39;]

[&#39;American Samoa&#39; &#39;Cambodia&#39; &#39;China&#39; &#39;Fiji&#39; &#39;Indonesia&#39; &#39;Kiribati&#39;
 &quot;Korea, Democratic People&#39;s Republic of&quot;
 &quot;Lao People&#39;s Democratic Republic&quot; &#39;Malaysia&#39; &#39;Marshall Islands&#39;
 &#39;Micronesia, Federated States of&#39; &#39;Mongolia&#39; &#39;Myanmar&#39;
 &#39;Northern Mariana Islands&#39; &#39;Palau&#39; &#39;Papua New Guinea&#39; &#39;Philippines&#39;
 &#39;Samoa&#39; &#39;Solomon Islands&#39; &#39;Thailand&#39; &#39;Timor-Leste&#39; &#39;Tonga&#39; &#39;Tuvalu&#39;
 &#39;Vanuatu&#39; &#39;Vietnam&#39; &#39;Albania&#39; &#39;Armenia&#39; &#39;Azerbaijan&#39; &#39;Belarus&#39;
 &#39;Bosnia and Herzegovina&#39; &#39;Bulgaria&#39; &#39;Croatia&#39; &#39;Czech Republic&#39; &#39;Estonia&#39;
 &#39;Georgia&#39; &#39;Hungary&#39; &#39;Kazakhstan&#39; &#39;Kosovo&#39; &#39;Kyrgyz Republic&#39; &#39;Latvia&#39;
 &#39;Lithuania&#39; &#39;Moldova&#39; &#39;Montenegro&#39; &#39;North Macedonia&#39; &#39;Poland&#39; &#39;Romania&#39;
 &#39;Russian Federation&#39; &#39;Serbia&#39; &#39;Slovak Republic&#39; &#39;Slovenia&#39; &#39;Tajikistan&#39;
 &#39;Turkey&#39; &#39;Turkmenistan&#39; &#39;Ukraine&#39; &#39;Uzbekistan&#39; &#39;Argentina&#39; &#39;Barbados&#39;
 &#39;Belize&#39; &#39;Bolivia&#39; &#39;Brazil&#39; &#39;Chile&#39; &#39;Colombia&#39; &#39;Costa Rica&#39; &#39;Cuba&#39;
 &#39;Dominica&#39; &#39;Dominican Republic&#39; &#39;Ecuador&#39; &#39;El Salvador&#39; &#39;Grenada&#39;
 &#39;Guatemala&#39; &#39;Guyana&#39; &#39;Haiti&#39; &#39;Honduras&#39; &#39;Jamaica&#39; &#39;Mexico&#39; &#39;Nicaragua&#39;
 &#39;Panama&#39; &#39;Paraguay&#39; &#39;Peru&#39; &#39;St. Kitts and Nevis&#39; &#39;St. Lucia&#39;
 &#39;St. Vincent and the Grenadines&#39; &#39;Suriname&#39; &#39;Trinidad and Tobago&#39;
 &#39;Uruguay&#39; &#39;Venezuela, Republica Bolivariana de&#39; &#39;Algeria&#39; &#39;Djibouti&#39;
 &#39;Egypt, Arab Republic of&#39; &#39;Iran, Islamic Republic of&#39; &#39;Iraq&#39; &#39;Jordan&#39;
 &#39;Lebanon&#39; &#39;Libya&#39; &#39;Morocco&#39; &#39;Oman&#39; &#39;Syrian Arab Republic&#39; &#39;Tunisia&#39;
 &#39;West Bank and Gaza&#39; &#39;Yemen, Republic of&#39; &#39;Andorra&#39; &#39;Antigua and Barbuda&#39;
 &#39;Aruba&#39; &#39;Australia&#39; &#39;Austria&#39; &#39;Bahamas, The&#39; &#39;Bahrain&#39; &#39;Belgium&#39;
 &#39;Bermuda&#39; &#39;British Virgin Islands&#39; &#39;Brunei Darussalam&#39; &#39;Canada&#39;
 &#39;Cayman Islands&#39; &#39;Channel Islands&#39; &#39;Curacao&#39; &#39;Cyprus&#39; &#39;Denmark&#39;
 &#39;Faroe Islands&#39; &#39;Finland&#39; &#39;France&#39; &#39;French Polynesia&#39; &#39;Germany&#39;
 &#39;Gibraltar&#39; &#39;Greece&#39; &#39;Greenland&#39; &#39;Guam&#39; &#39;Hong Kong SAR, China&#39; &#39;Iceland&#39;
 &#39;Ireland&#39; &#39;Isle of Man&#39; &#39;Israel&#39; &#39;Italy&#39; &#39;Japan&#39; &#39;Korea, Republic of&#39;
 &#39;Kuwait&#39; &#39;Liechtenstein&#39; &#39;Luxembourg&#39; &#39;Macao SAR, China&#39; &#39;Malta&#39; &#39;Monaco&#39;
 &#39;Nauru&#39; &#39;Netherlands&#39; &#39;New Caledonia&#39; &#39;New Zealand&#39; &#39;Norway&#39; &#39;Portugal&#39;
 &#39;Puerto Rico&#39; &#39;Qatar&#39; &#39;San Marino&#39; &#39;Saudi Arabia&#39; &#39;Singapore&#39;
 &#39;Sint Maarten (Dutch part)&#39; &#39;Spain&#39; &#39;St. Martin (French part)&#39; &#39;Sweden&#39;
 &#39;Switzerland&#39; &#39;Taiwan, China&#39; &#39;Turks and Caicos Islands&#39;
 &#39;United Arab Emirates&#39; &#39;United Kingdom&#39; &#39;United States&#39;
 &#39;Virgin Islands, US&#39; &#39;Afghanistan&#39; &#39;Bangladesh&#39; &#39;Bhutan&#39; &#39;India&#39;
 &#39;Maldives&#39; &#39;Nepal&#39; &#39;Pakistan&#39; &#39;Sri Lanka&#39; &#39;Angola&#39; &#39;Benin&#39; &#39;Botswana&#39;
 &#39;Burkina Faso&#39; &#39;Burundi&#39; &#39;Cabo Verde&#39; &#39;Cameroon&#39;
 &#39;Central African Republic&#39; &#39;Chad&#39; &#39;Comoros&#39;
 &#39;Congo, Democratic Republic of&#39; &#39;Congo, Republic of&#39; &quot;Cote d&#39;Ivoire&quot;
 &#39;Equatorial Guinea&#39; &#39;Eritrea&#39; &#39;Eswatini&#39; &#39;Ethiopia&#39; &#39;Gabon&#39; &#39;Gambia, The&#39;
 &#39;Ghana&#39; &#39;Guinea&#39; &#39;Guinea-Bissau&#39; &#39;Kenya&#39; &#39;Lesotho&#39; &#39;Liberia&#39; &#39;Madagascar&#39;
 &#39;Malawi&#39; &#39;Mali&#39; &#39;Mauritania&#39; &#39;Mauritius&#39; &#39;Mozambique&#39; &#39;Namibia&#39; &#39;Niger&#39;
 &#39;Nigeria&#39; &#39;Rwanda&#39; &#39;Sao Tome and Principe&#39; &#39;Senegal&#39; &#39;Seychelles&#39;
 &#39;Sierra Leone&#39; &#39;Somalia&#39; &#39;South Africa&#39; &#39;South Sudan&#39; &#39;Sudan&#39; &#39;Tanzania&#39;
 &#39;Togo&#39; &#39;Uganda&#39; &#39;Zambia&#39; &#39;Zimbabwe&#39;]
</pre></div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
            
                <!-- Previous / next buttons -->
<div class='prev-next-area'> 
    <a class='left-prev' id="prev-link" href="data-storytelling.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">Welcome to Data Storytelling!</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="data-pipelining.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Welcome to Data Pipelining!</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
            
        </div>
    </div>
    <footer class="footer">
  <p>
    
      By Cynthia Thinwa<br/>
    
        &copy; Copyright 2022.<br/>
  </p>
</footer>
</main>


      </div>
    </div>
  
  <script src="_static/js/index.be7d3bbb2ef33a8344ce.js"></script>

  </body>
</html>